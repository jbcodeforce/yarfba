<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jerome Boyer"><link href=../../kinesis/ rel=prev><link href=../stepfct/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>EventBridge - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#eventbridge class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> EventBridge </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infra/ class=md-nav__link> <span class=md-ellipsis> EC2-others </span> </a> </li> <li class=md-nav__item> <a href=../../infra/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../infra/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../infra/storage/ class=md-nav__link> <span class=md-ellipsis> S3-Storage </span> </a> </li> <li class=md-nav__item> <a href=../../infra/route53/ class=md-nav__link> <span class=md-ellipsis> Route 53 </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/cost/ class=md-nav__link> <span class=md-ellipsis> Cost mgt </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sa/well-architectured/ class=md-nav__link> <span class=md-ellipsis> Well Architectured </span> </a> </li> <li class=md-nav__item> <a href=../../sa/sol-design/ class=md-nav__link> <span class=md-ellipsis> Solution design </span> </a> </li> <li class=md-nav__item> <a href=../../sa/psa-role/ class=md-nav__link> <span class=md-ellipsis> SA </span> </a> </li> <li class=md-nav__item> <a href=../../sa/saas/ class=md-nav__link> <span class=md-ellipsis> SaaS </span> </a> </li> <li class=md-nav__item> <a href=../../sa/resiliency/ class=md-nav__link> <span class=md-ellipsis> Resiliency </span> </a> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> <span class=md-ellipsis> Conduct Design session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Analytics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../analytics/emr/ class=md-nav__link> <span class=md-ellipsis> EMR </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../data/rds/ class=md-nav__link> <span class=md-ellipsis> RDS-Aurora </span> </a> </li> <li class=md-nav__item> <a href=../../data/dynamodb/ class=md-nav__link> <span class=md-ellipsis> DynamoDB </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-lake/ class=md-nav__link> <span class=md-ellipsis> Data Lake </span> </a> </li> <li class=md-nav__item> <a href=../../data/redshift/ class=md-nav__link> <span class=md-ellipsis> RedShift </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> AI-ML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> AI-ML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> <span class=md-ellipsis> All Services </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/sagemaker/ class=md-nav__link> <span class=md-ellipsis> SageMaker </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/bedrock/ class=md-nav__link> <span class=md-ellipsis> Bedrock </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/q/ class=md-nav__link> <span class=md-ellipsis> Amazon Q </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Serverless </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../lambda/ class=md-nav__link> <span class=md-ellipsis> Lambda </span> </a> </li> <li class=md-nav__item> <a href=../apigtw/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> <li class=md-nav__item> <a href=../ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../eks/ class=md-nav__link> <span class=md-ellipsis> EKS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> Messaging </span> </a> </li> <li class=md-nav__item> <a href=../msk/ class=md-nav__link> <span class=md-ellipsis> MSK </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> EventBridge </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> EventBridge </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#value-propositions class=md-nav__link> <span class=md-ellipsis> Value Propositions </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> <nav class=md-nav aria-label=Concepts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-examples class=md-nav__link> <span class=md-ellipsis> Pattern examples </span> </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=#cli-sam class=md-nav__link> <span class=md-ellipsis> CLI - SAM </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deployment-patterns class=md-nav__link> <span class=md-ellipsis> Deployment patterns </span> </a> </li> <li class=md-nav__item> <a href=#solution-patterns class=md-nav__link> <span class=md-ellipsis> Solution patterns </span> </a> <nav class=md-nav aria-label="Solution patterns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#solution-development-approach-with-eventbridge class=md-nav__link> <span class=md-ellipsis> Solution development approach with EventBridge </span> </a> </li> <li class=md-nav__item> <a href=#how-tos-and-best-practices class=md-nav__link> <span class=md-ellipsis> How tos and best practices </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> <span class=md-ellipsis> Deeper dive </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../stepfct/ class=md-nav__link> <span class=md-ellipsis> Step function </span> </a> </li> <li class=md-nav__item> <a href=../mwaa/ class=md-nav__link> <span class=md-ellipsis> MWAA </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Playground </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/ class=md-nav__link> <span class=md-ellipsis> AWS personal labs </span> </a> </li> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> <span class=md-ellipsis> Getting Started EC2 </span> </a> </li> <li class=md-nav__item> <a href=../../playground/security/ class=md-nav__link> <span class=md-ellipsis> Security-IAM demos </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-play/ class=md-nav__link> <span class=md-ellipsis> S3 play </span> </a> </li> <li class=md-nav__item> <a href=../../playground/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> <span class=md-ellipsis> RDS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> <span class=md-ellipsis> Data processing </span> </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> <span class=md-ellipsis> Analytics on EMR </span> </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> <span class=md-ellipsis> S3 storage lens </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> <span class=md-ellipsis> SaaS demo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/ class=md-nav__link> <span class=md-ellipsis> Practices </span> </a> </li> <li class=md-nav__item> <a href=../../coding/sam/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cloudFormation/ class=md-nav__link> <span class=md-ellipsis> CloudFormation </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cdk/ class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> <span class=md-ellipsis> Return to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#value-propositions class=md-nav__link> <span class=md-ellipsis> Value Propositions </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> <nav class=md-nav aria-label=Concepts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pattern-examples class=md-nav__link> <span class=md-ellipsis> Pattern examples </span> </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=#cli-sam class=md-nav__link> <span class=md-ellipsis> CLI - SAM </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deployment-patterns class=md-nav__link> <span class=md-ellipsis> Deployment patterns </span> </a> </li> <li class=md-nav__item> <a href=#solution-patterns class=md-nav__link> <span class=md-ellipsis> Solution patterns </span> </a> <nav class=md-nav aria-label="Solution patterns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#solution-development-approach-with-eventbridge class=md-nav__link> <span class=md-ellipsis> Solution development approach with EventBridge </span> </a> </li> <li class=md-nav__item> <a href=#how-tos-and-best-practices class=md-nav__link> <span class=md-ellipsis> How tos and best practices </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#faqs class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> <span class=md-ellipsis> Deeper dive </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=eventbridge>EventBridge<a class=headerlink href=#eventbridge title="Permanent link">&para;</a></h1> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Created 11/2023 - Updated 02/13/2024</p> </div> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p><a href=https://aws.amazon.com/eventbridge/ >Amazon EventBridge</a> is a serverless event bus service (Formerly CloudWatch Event), which is a router to send messages to Lambda functions, SQS, SNS, or some SaaS providers, using event routing rules. This is not a queueing, topic, or streaming product.</p> <p>EventBridge is a service for building scalable event-driven applications, enabling highly agile software development via fully managed and secure integrations, cutting costs and reducing time to production.</p> <p>The following figure illustrates the typical source of events and how EventBridge can process them and sends JSON documents to different sinks. Filtering logic may be applied.</p> <p><img alt src=../diagrams/event-bridge-0.drawio.png width=1000></p> <p>In each AWS account there is an EventBridge default event bus already created, but we can add our own, via CLI, CloudFormation, CDK,... An event bus is a pipeline that receives events. To receive events from SaaS partners, we need to create a partner event source connected to a partner event bus.</p> <p>EventBridge supports 28+ AWS service as targets. We can also integrate to Partners SaaS services like Datadog, Zendeck, git, Spotify, another EventBridge event bus... </p> <p>Target can be an API destination which is made up of an HTTP endpoint, HTTP method (such as GET, POST, PUT), and a connection, which defines the type of authorization and credentials used to call the endpoint. </p> <p>EventBridge event bus as target can be use for cross region replication, for events aggregation in a same region. This could be mono or cross AWS accounts. Routing events between event buses in different accounts allows to support workloads grow in size and complexity (the receiver account must grant permission on the target event bus to allow the sending account to send events).</p> <h2 id=value-propositions>Value Propositions<a class=headerlink href=#value-propositions title="Permanent link">&para;</a></h2> <ul> <li>No infrastructure to manage.</li> <li>Fully managed event backbone to pass events from sources to sinks using routing logic.</li> <li>A lot of native, easy, integration with AWS Services.</li> <li>Combined with DynamoDB streams, API Gateway, SQS, SNS and Lambda, it is relatively easy to develop quick applications with no server and complex environment to configure. </li> <li>No need to write custom integration code, as could be done in classical ESB, but still support filtering and transformations.</li> <li>Enabled archive to support replayability.</li> <li>End point to end-point integration, with pipe to do advanced filtering and enrichments. </li> <li>Support scheduled event creation.</li> <li>EventBridge supports three methods for authorization: basic auth, OAuth, and API key</li> </ul> <p><a href=https://aws.amazon.com/eventbridge/features/ >Read features presentation.</a></p> <h2 id=concepts>Concepts<a class=headerlink href=#concepts title="Permanent link">&para;</a></h2> <ul> <li><strong>Event</strong> represents a change that happened in the past. Event, in EventBridge has the following <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-service-event.html>structure with metadata</a> and payload in the <code>detail</code> element. The combination of the "source" and "detail-type" fields serves to identify the fields and values found in the "detail" field.</li> </ul> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;6a7e8feb-b491-4cf7-a9f1-bf3703467718&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;detail-type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;EC2 Instance State-change Notification&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;source&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;aws.ec2&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;account&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;111111111111&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2017-12-22T18:43:48Z&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;region&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;us-west-1&quot;</span><span class=p>,</span>
<span class=w>  </span><span class=nt>&quot;resources&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=s2>&quot;arn:aws:ec2:us-west-1:123456789012:instance/ i-1234567890abcdef0&quot;</span>
<span class=w>  </span><span class=p>],</span>
<span class=w>  </span><span class=nt>&quot;detail&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;instance-id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot; i-1234567890abcdef0&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <ul> <li><strong>Event buses</strong> - An event bus receives events. In term of design, it should include all the events related to the same business entity. It can be seen as a queue or a topic, or a channel.</li> <li> <p><strong><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-events.html>Event Pattern</a></strong> are JSON objects with the same structure of the event that it is matching. The field names must also appear in the event with the same nesting structure. Any additional fields in the event that aren't included in the event pattern are ignored. Event patterns are defined in the context of event rule.</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=nt>&quot;source&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;aws.ec2&quot;</span><span class=w> </span><span class=p>],</span>
<span class=w>  </span><span class=nt>&quot;detail&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;terminated&quot;</span><span class=w> </span><span class=p>]</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </li> <li> <p><strong>Routing rule</strong> matches incoming events and routes them to targets for processing. When we create a rule, we associate it with a specific event bus, and the rule is matched only to events received by that event bus. <code>Source</code> field is a meta-data attribute that is set by the producer application to uniquely identify itself, and can be used to filter and route to different consumer. It is useful to avoid looping on events coming in the event bus from different sources.</p> <ul> <li>Rule matching operates in constant time. The rule engine is in <a href=https://github.com/aws/event-ruler>this event-rules repository.</a></li> <li>There are limits on the number of rules per bus (2000).</li> <li>We can only use Scheduled rules on the <code>default</code> event bus.</li> <li>EventBridge rules help to filter the events before they are sent to the targets, making sure that each target receives only the events they are interested in. A <strong>routing rule</strong> can customize the JSON sent to the target, by passing only certain parts of the message or by overwriting message attributes with constant values.</li> <li>For each target of a rule, we can define a retry policy that defines how many times and how long EventBridge will try to send the event again. SQS DLQ can be used for undelivered events.</li> </ul> </li> <li> <p><strong>Target</strong> is a resource, EventBridge sends events when the rule pattern matches. We can create multiple targets for one rule.</p> </li> <li><strong>EventBridge Pipes</strong>: is used for point to point connection between producer and consumer with filtering, enrichment and transformation capabilities. It may keep message order from source to one destination. The sources can be DynamoDB stream, Kinesis stream, MQ broker, MSK stream, Kafka topic, SQS queue.</li> <li> <p><strong>Global endpoints</strong> is used to facilitate failing over a secondary region, in case of primary disruption. It is linked to CloudWatch Alarm and Route 51 health checks.</p> </li> <li> <p>With <strong>Schema Discovery</strong> enabled, we can automatically get a schema definition from the event sent to the bus, saved in a schema registry. Schema Discovery also detects changes to event schema and automatically generates new schema version. From the schema in the registry, we can get code binding for Java, TypeScript, and Python, to jump start any consumer apps.</p> </li> <li>With the <strong>archive and replay</strong> feature, EventBridge can record any events processed by any type of event bus. Replay stores these recorded events in archives. We can choose to record all events, or filter events to be archived by using the same event pattern matching logic used in rules.</li> </ul> <h3 id=pattern-examples>Pattern examples<a class=headerlink href=#pattern-examples title="Permanent link">&para;</a></h3> <ul> <li> <p>A <strong>or</strong> statement in a rule:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=nt>&quot;detail&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;location&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;eu-west&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;eu-east&quot;</span><span class=p>]</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Or between attribute</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=nt>&quot;detail&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;$or&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>      </span><span class=p>{</span><span class=nt>&quot;location&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;eu-west&quot;</span><span class=p>]},</span>
<span class=w>      </span><span class=p>{</span><span class=nt>&quot;nb_passengers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;numeric&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=s2>&quot;&gt;&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=p>]}]}</span>
<span class=w>    </span><span class=p>]</span>
<span class=w>  </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </li> <li> <p>A prefix based statement:</p> </li> </ul> <p><img alt src=../images/eb-prefix-rule.png></p> <h3 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h3> <p>EventBridge uses <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-iam.html>AWS Identity and Access Management</a>, to manage both identity-based and resource-based policies. To make API calls against the resources we own, EventBridge needs the appropriate permissions. We can attach <em>resource-based policies</em> to the target resource with permission for the EventBridge service to call the required API. </p> <p>To invoke an API Gateway endpoint using an EventBridge rule, you could add an allow statement on the "execute-api:Invoke" API action.</p> <div class=highlight><pre><span></span><code>
</code></pre></div> <p><em>Identity-based policies</em> are attached to an IAM user, group, or role that is assumed by the EventBridge service when the rule is invoked. <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-use-conditions.html>See fine-grained access control documentation.</a>. Amazon EventBridge has two AWS managed policies you can attach to users or groups: <strong>AmazonEventBridgeFullAccess</strong> or <strong>AmazonEventBridgeReadOnlyAccess</strong>.</p> <p>We can <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-bus-perms.html>authorize other account</a> to PutEvents, PutRule or PutTargets API calls to an existing Event Bus via <strong>resource-based policy</strong>. It can be done for cross-region too.</p> <p><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-bus-perms.html#eb-event-bus-example-policy-cross-account-custom-bus-source>See Example policy: Send events to a custom bus in a different account.</a></p> <p>It provides encryption at rest and in transit by default.</p> <h3 id=cli-sam>CLI - SAM<a class=headerlink href=#cli-sam title="Permanent link">&para;</a></h3> <p>Develop can use <a href=https://awscli.amazonaws.com/v2/documentation/api/latest/reference/events/index.html>AWS CLI events</a> to create an event bus:</p> <div class=highlight><pre><span></span><code>aws<span class=w> </span>events<span class=w> </span>create-event-bus<span class=w> </span>--name<span class=w> </span>account_events
</code></pre></div> <p>SAM can be used with the following CLI options to select an existing schema: <code>Infrastructure event management &gt; ... &gt; EventBridge App from scratch (100+ Event Schemas) &gt;... Schema registry &gt; EventSchema...</code> </p> <p>The same can be done with AWS CLI:</p> <div class=highlight><pre><span></span><code>aws<span class=w> </span>schemas<span class=w> </span>put-code-binding<span class=w> </span>--registry-name<span class=w> </span>discovered-schemas<span class=w> </span>--schema-name<span class=w> </span>com.aws.orders@OrderNotification<span class=w> </span>--language<span class=w> </span>Python36
</code></pre></div> <p>When code bindings are published, we can download them using get-code-binding-source command. </p> <div class=highlight><pre><span></span><code>aws<span class=w> </span>schemas<span class=w> </span>get-code-binding-source<span class=w> </span>--registry-name<span class=w> </span>discovered-schemas<span class=w> </span>--schema-name<span class=w> </span>com.aws.orders@OrderNotificatio
</code></pre></div> <h2 id=deployment-patterns>Deployment patterns<a class=headerlink href=#deployment-patterns title="Permanent link">&para;</a></h2> <p>A a managed service, it is running under AWS VPC, scale horizontally and is highly available. Custom buses are defined per region. We can enable event replication to send from primary event bus to a secondary region. Events are processed in the secondary Region asynchronously.</p> <p>EventBridge provides <strong>at-least-once</strong> event delivery to targets, and is designed to retry sending events that are not delivered. Therefore we need to implement idempotency. The default retry policy is 24 hours up to 185 times. It uses exponential back-off and jitter. If a retry policy is unsuccessful in delivering the event, the event is dropped. To avoid losing events after they failed to be delivered to a target, configure a DLQ.</p> <p>AWS services send event to EventBridge using <strong>best effort</strong> delivery (in some rare cases an event might not be delivered) or with <strong>durable delivery</strong> (at least once).</p> <p>It is possible for application within a VPC to produce events to event bus, using Interface VPC endpoints, and to be an API destination (ECS task) also using Interface VPC endpoints.</p> <p><img alt src=../diagrams/eb-vpc-inter.drawio.png></p> <p><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-related-service-vpc.html>See EventBridge product documentation</a> and <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/create-interface-endpoint.html#create-interface-endpoint.html>access an AWS service using an interface VPC endpoint</a>.</p> <p>EventBridge with API Destination as target can also use private HTTP endpoint within a VPC. (See <a href="https://aws.amazon.com/blogs/compute/sending-amazon-eventbridge-events-to-private-endpoints-in-a-vpc/?ref=serverlessland">this blog</a>) and the <a href=https://github.com/aws-samples/eventbridge-events-to-vpc.git>git repository aws-sample eventbridge-events-to-vpc</a>.</p> <p>When using different regions for a disaster recovery architecture, RTO includes time period for triggering CloudWatch alarms and updating statuses for Route 53 health checks. For RPO, the time includes events that are not replicated to the secondary Region and are stuck in the primary Region until the service or Region recovers. (RTO and RPO can be max of 420s).</p> <h2 id=solution-patterns>Solution patterns<a class=headerlink href=#solution-patterns title="Permanent link">&para;</a></h2> <p>Below is a standard end to end solution using common patterns:</p> <p><img alt src=../diagrams/event-b-solution.drawio.png></p> <ul> <li>EventBridge can be used to Fan-out to different sinks or delivery targets but with limited way, see next bullet.</li> <li>With high transaction per second throughput, developers need to consider the number of delivery targets. For 1 target and 1 rule, it is common to be over 500k tps. Growing the number of delivery targets adds latency.</li> <li>So when we need to fan-out more, we can add SNS as delivery target after EventBridge. EB is then used for filtering events.</li> <li>We can define a central event hub to aggregate all the events from AWS Organizations into a single AWS account or region. Apps in different accounts can be authorized to send events to this central hub via resource-based policy.</li> <li>As events in archive aren't necessarily replayed in the same order that they were added to the archive, it is important to add a timestamp on the event message.</li> <li>Add a sequence_id or idempotency_id in the produced event for idempotency supports by consumers.</li> </ul> <h3 id=solution-development-approach-with-eventbridge>Solution development approach with EventBridge<a class=headerlink href=#solution-development-approach-with-eventbridge title="Permanent link">&para;</a></h3> <ul> <li>Assess who own the rules, and try to limit the number of rules, and focus on trying to get one rule to one delivery target.</li> <li>Define the schema of the event with JSONSchema, including the definition of the AWSEvent envelop.</li> <li>Upload the schema to the schema registry</li> <li>Create EventBridge bus per business entity (DDD aggregate). For example an <code>OrderEventBus</code> will support multiple event types: OrderCreated, OrderUpdated... </li> <li>Create routing rule with the event patterns that match certain event attribute and route to a target.</li> <li>Generate the Java, Nodejs or Python bindings</li> <li> <p>EventBridge is defined at the region level. So producer and consumer apps need to get region information in environment variables.</p> </li> <li> <p>The AWS CLI support EventBridge via <a href=https://awscli.amazonaws.com/v2/documentation/api/latest/reference/events/index.html#cli-aws-events>aws events</a>. </p> </li> <li><a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-eventbus.html>Cloud Formation EventBridge template</a></li> <li> <p><a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_events/README.html>EventBridge CDK Construct library in Python</a></p> </li> <li> <p>Classical steps to develop a Lambda function from an Event definition in the schema registry:</p> </li> <li> <p>Create a sam project</p> </li> <li>By getting the code binding from the event model</li> <li>In the Lambda function, use <code>boto3</code> to access the backend and return response back to EventBridge event bus.</li> <li>Implement business logic in the Lambda handler function.</li> </ul> <h3 id=how-tos-and-best-practices>How tos and best practices<a class=headerlink href=#how-tos-and-best-practices title="Permanent link">&para;</a></h3> <p><a href="https://serverlessland.com/search?search=eventbridge">ServerlessLand</a> has a lot of CloudFormation examples to deploy different EDA patterns.</p> <details class="- question"> <summary>How to do a quick validation a routing rule works</summary> <p>A simple way to validate the rules execution, is to use Amazon CloudWatch as a catch all target. See the SAM below:</p> <div class=highlight><pre><span></span><code><span class=nt>CarRideEventsLogGroup</span><span class=p>:</span>
<span class=w>    </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AWS::Logs::LogGroup</span>
<span class=w>    </span><span class=nt>Properties</span><span class=p>:</span>
<span class=w>      </span><span class=nt>RetentionInDays</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=w>      </span><span class=nt>LogGroupName</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/aws/events/acr/carrides&quot;</span>
<span class=nt>CarRideEventsToLogRule</span><span class=p>:</span>
<span class=w>  </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AWS::Events::Rule</span>
<span class=w>  </span><span class=nt>Properties</span><span class=p>:</span>
<span class=w>    </span><span class=nt>Description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Catch all rule for development purposes- go to cloudwatch</span>
<span class=w>    </span><span class=nt>EventBusName</span><span class=p>:</span><span class=w> </span><span class=kt>!Ref</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">EventBusName</span>
<span class=w>    </span><span class=nt>EventPattern</span><span class=p>:</span>
<span class=w>      </span><span class=nt>source</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">acr.com.car-ride-simulator</span>
<span class=w>    </span><span class=nt>Name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CarRideEventsDevRule</span>
<span class=w>    </span><span class=nt>State</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ENABLED</span>
<span class=w>    </span><span class=nt>Targets</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>Id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ide60ca354-ebb9-47d2-ad81-6a52867eb9e6</span>
<span class=w>        </span><span class=nt>Arn</span><span class=p>:</span><span class=w> </span><span class=kt>!Sub</span><span class=w> </span><span class=s>&quot;arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:${CarRideEventsLogGroup}&quot;</span>
</code></pre></div> </details> <ul> <li>Create a rule for the event bus that will act as a "catch-all" for every event passed to the bus, irrespective of source.</li> </ul> <details class=info> <summary>The <a href=https://catalog.us-east-1.prod.workshops.aws/workshops/63320e83-6abc-493d-83d8-f822584fb3cb/en-US>AWS Building EDA workshop solution</a></summary> <p>The solution looks like in the following figure:</p> <p><img alt src=../diagrams/eda-eb-lab-arch.drawio.png></p> <p>It is also refactorized in <a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/eda>labs/eda</a>, (see readme).</p> <ol> <li>The event bridge to API gateway communication, illustrates that events can be pushed to HTTP endpoint, using Basic authentication. The demo also includes a lambda function to act as an authorizer by looking at the header token inside the HTTP request.</li> <li>Orders event bus has a routing rule to send to Step function when the detail of the event includes a <code>location</code> attribute with a prefix starting by "eu". The Step function sends back an event to the same source, <code>com.aws.orders</code> with a new order_id. </li> <li>Order events can also be propagated to a SNS to do a fan-out pattern.</li> </ol> </details> <details class=info> <summary>Basic example to process EC2 event</summary> <ul> <li>Example of creating routing rules to assess when an EC2 is stopped:</li> </ul> <p><img alt src=../images/eb-create-rule.png></p> <ul> <li>We can use a sandbox feature to test the event type we want to work on (use the event template and then the <code>detail</code> element for the payload):</li> </ul> <p><img alt src=../images/eb-event-type.png></p> <ul> <li>then define the rule using event pattern as json document, and test the rule:</li> </ul> <p><img alt src=../images/eb-event-pattern.png></p> <ul> <li>specify the target to the routing rule, for example a SNS topic.</li> </ul> <p><img alt src=../images/eb-target.png></p> <ul> <li>EventBridge can infer the data schema from the event, and use a SchemaRegistry. The SchemaRegitry will help generate code for our applications. </li> </ul> <p><img alt src=../images/eb-event-schema.png></p> <p>From this schema definition, in OpenAPI 2.0 format, we can get code sample to get the definition of the events and the marshalizer. </p> </details> <details class="- question"> <summary>How to replay events from archive</summary> </details> <details class=info> <summary>AWS Step task to publish event</summary> <p>Declaring a task in a Step function to publish an <code>OrderProcessed</code> event back to the <code>Orders</code> event bus, using Cloud Formation template syntax:</p> <div class=highlight><pre><span></span><code><span class=w>    </span><span class=nt>&quot;PublishOrderProcessedEvent&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;Type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;Resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;arn:aws:states:::events:putEvents&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;Parameters&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;Entries&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=p>{</span>
<span class=w>            </span><span class=nt>&quot;Detail&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nt>&quot;OrderId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new_id&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=nt>&quot;OrderDetails.$&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;$.detail&quot;</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>            </span><span class=nt>&quot;DetailType&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Order Processed&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;EventBusName&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Orders&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nt>&quot;Source&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;com.aws.orders&quot;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>]</span>
<span class=w>    </span><span class=p>},</span>
</code></pre></div> </details> <details class=question> <summary>How to send an event via CLI</summary> <div class=highlight><pre><span></span><code>aws<span class=w> </span>events<span class=w> </span>put-events<span class=w> </span>--entries<span class=w> </span>file://OrderNotification_v1.json
</code></pre></div> </details> <details class=info> <summary>Define EventBridge, pattern, rule and target with CDK</summary> </details> <p><a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_events/README.html>See CDK doc</a>.</p> <h2 id=faqs>FAQs<a class=headerlink href=#faqs title="Permanent link">&para;</a></h2> <ul> <li><a href=https://aws.amazon.com/eventbridge/faqs/ >Product FAQs</a></li> </ul> <details class="- question"> <summary>Benefits of event-driven architectures in context of EventBridge</summary> <p>EventBridge offers decoupling protocol to share messages between producers and consumers. It offers schema registry to get some data contract between consumers and producer. It helps to adopt an evolutionary architecture by adding consumer over time and routing rules to those consumers. </p> </details> <details class="- question"> <summary>Example of filtering and routing rules</summary> </details> <details class="- question"> <summary>What is input transformer?</summary> <p><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-transform-target-input.html>Input transformers</a> are templating mechanisms to transform input JSON document to another format. The transformation defines variables that use the JSON path to reference values in the original matched event. To access the customer workload use <code>$.detail</code>.</p> </details> <details class="- question"> <summary>What are the differences between default and custom event buses</summary> <p>Default is created for each account and used by internal AWS services to propagate events. It is also used by the Scheduler. Custom buses are mandatory to develop real-life solution. An event bus is mapped to a business entity and support the different event types for this entity.</p> </details> <details class="- question"> <summary>Integrations with Lambda and other destinations</summary> <ul> <li>EventBus to Lambda</li> <li>Lambda to EventBus: use SDK to put message to EventBridge.</li> </ul> </details> <details class="- question"> <summary>Explain archive and replay capabilities and best practices</summary> </details> <details class="- question"> <summary>How to implement API Destination and explain benefits</summary> <p><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-api-destinations.html>API Destination</a> supports integration to any HTTP endpoint. See <a href=https://youtu.be/2ayxa3AdiK0>this video</a>, and the <a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_events/ApiDestination.html>Python CDK</a> to define API destination (authentication can be saved in AWS secrets). </p> </details> <details class="- question"> <summary>How to assist customer in defining an event-driven architecture approach</summary> </details> <details class="- question"> <summary>How to articulate benefits of EventBridge and assist customer in selecting a messaging platform</summary> </details> <details class="- question"> <summary>Understanding of limits, throughput, and latencies</summary> <p>100 event buses per region. Each event bus can have up to 300 rules as the default limit (up to 2000 rules). Each rule can be configured for up to five targets. The event payload (with all metadata) must be less than 256 KB. There is a transactions-per-second quotas for the PutEvents API per AWS Region. Batch events in a single request, if needed. If there is throttling or delays in rule processing, it might come from exceeded the invocation quota limit. EventBridge will re-attempt invocations for up to 24 hours. <a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-quota.html>See quotas documentation.</a></p> </details> <h2 id=deeper-dive>Deeper dive<a class=headerlink href=#deeper-dive title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-tutorial.html>Product documentation Tutorials</a></li> <li><a href=https://catalog.us-east-1.prod.workshops.aws/workshops/63320e83-6abc-493d-83d8-f822584fb3cb/en-US/ >Building event-driven architectures on AWS</a></li> <li><a href=https://labs.skillbuilder.aws/sa/lab/arn%3Aaws%3Alearningcontent%3Aus-east-1%3A470679935125%3Ablueprintversion%2FSPL-TF-200-SVGWEB-1%3A1.0.8-f6cff7f6/en-US>Event Driven Architecture with Amazon API Gateway, Amazon EventBridge and AWS Lambda</a></li> <li><a href=https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_events-readme.html>Amazon EventBridge CDK Construct Library Event </a></li> <li><a href=https://aws.amazon.com/eventbridge/resources/#Webinars_and_videos>Webinars and videos</a></li> <li><a href=https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html#eb-supported-integrations>Integration with SaaS Partners</a></li> <li><a href=https://aws.amazon.com/blogs/compute/working-with-events-and-amazon-eventbridge-schema-registry/ >Working with events and the Amazon EventBridge schema registry</a></li> <li><a href=https://docs.aws.amazon.com/scheduler/latest/UserGuide/index.html>Amazon EventBridge Scheduler User Guide</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../kinesis/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Kinesis*"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Kinesis* </div> </div> </a> <a href=../stepfct/ class="md-footer__link md-footer__link--next" aria-label="Next: Step function"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Step function </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> </body> </html>