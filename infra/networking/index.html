<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jerome Boyer"><link href=../ rel=prev><link href=../security/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>Networking - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#networking class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Networking </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> EC2-others </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Networking </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#virtual-private-cloud class=md-nav__link> <span class=md-ellipsis> Virtual Private Cloud </span> </a> <nav class=md-nav aria-label="Virtual Private Cloud"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#elastic-network-interfaces class=md-nav__link> <span class=md-ellipsis> Elastic Network Interfaces </span> </a> </li> <li class=md-nav__item> <a href=#routing-tables class=md-nav__link> <span class=md-ellipsis> Routing Tables </span> </a> </li> <li class=md-nav__item> <a href=#nat-gateway class=md-nav__link> <span class=md-ellipsis> NAT Gateway </span> </a> </li> <li class=md-nav__item> <a href=#network-acls class=md-nav__link> <span class=md-ellipsis> Network ACLs </span> </a> </li> <li class=md-nav__item> <a href=#vpc-peering class=md-nav__link> <span class=md-ellipsis> VPC peering </span> </a> </li> <li class=md-nav__item> <a href=#transit-gateway class=md-nav__link> <span class=md-ellipsis> Transit Gateway </span> </a> </li> <li class=md-nav__item> <a href=#vpc-endpoint class=md-nav__link> <span class=md-ellipsis> VPC Endpoint </span> </a> </li> <li class=md-nav__item> <a href=#vpc-flow-logs class=md-nav__link> <span class=md-ellipsis> VPC Flow Logs </span> </a> </li> <li class=md-nav__item> <a href=#bastion-host class=md-nav__link> <span class=md-ellipsis> Bastion Host </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> <span class=md-ellipsis> Deeper Dive </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#hybrid-networking class=md-nav__link> <span class=md-ellipsis> Hybrid networking </span> </a> <nav class=md-nav aria-label="Hybrid networking"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client-vpn class=md-nav__link> <span class=md-ellipsis> Client VPN </span> </a> </li> <li class=md-nav__item> <a href=#site-to-site-vpn class=md-nav__link> <span class=md-ellipsis> Site-to-Site VPN </span> </a> </li> <li class=md-nav__item> <a href=#direct-connect class=md-nav__link> <span class=md-ellipsis> Direct Connect </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extended-picture class=md-nav__link> <span class=md-ellipsis> Extended picture </span> </a> </li> <li class=md-nav__item> <a href=#elastic-load-balancers class=md-nav__link> <span class=md-ellipsis> Elastic Load balancers </span> </a> <nav class=md-nav aria-label="Elastic Load balancers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#four-types-of-elb-supported class=md-nav__link> <span class=md-ellipsis> Four types of ELB supported </span> </a> </li> <li class=md-nav__item> <a href=#load-balancer-stickiness class=md-nav__link> <span class=md-ellipsis> Load balancer stickiness </span> </a> </li> <li class=md-nav__item> <a href=#cross-zone-load-balancing class=md-nav__link> <span class=md-ellipsis> Cross Zone Load Balancing </span> </a> </li> <li class=md-nav__item> <a href=#tls-transport-layer-security class=md-nav__link> <span class=md-ellipsis> TLS - Transport Layer Security, </span> </a> </li> <li class=md-nav__item> <a href=#connection-draining class=md-nav__link> <span class=md-ellipsis> Connection draining </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive_1 class=md-nav__link> <span class=md-ellipsis> Deeper dive </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cloudfront class=md-nav__link> <span class=md-ellipsis> CloudFront </span> </a> </li> <li class=md-nav__item> <a href=#global-accelerator class=md-nav__link> <span class=md-ellipsis> Global Accelerator </span> </a> </li> <li class=md-nav__item> <a href=#vpn-cloudhub class=md-nav__link> <span class=md-ellipsis> VPN CloudHub </span> </a> </li> <li class=md-nav__item> <a href=#faqs class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> </li> <li class=md-nav__item> <a href=#traffic-mirroring class=md-nav__link> <span class=md-ellipsis> Traffic mirroring </span> </a> </li> <li class=md-nav__item> <a href=#cloud-wan class=md-nav__link> <span class=md-ellipsis> Cloud WAN </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../storage/ class=md-nav__link> <span class=md-ellipsis> S3-Storage </span> </a> </li> <li class=md-nav__item> <a href=../route53/ class=md-nav__link> <span class=md-ellipsis> Route 53 </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/cost/ class=md-nav__link> <span class=md-ellipsis> Cost mgt </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sa/well-architectured/ class=md-nav__link> <span class=md-ellipsis> Well Architectured </span> </a> </li> <li class=md-nav__item> <a href=../../sa/sol-design/ class=md-nav__link> <span class=md-ellipsis> Solution design </span> </a> </li> <li class=md-nav__item> <a href=../../sa/psa-role/ class=md-nav__link> <span class=md-ellipsis> SA </span> </a> </li> <li class=md-nav__item> <a href=../../sa/saas/ class=md-nav__link> <span class=md-ellipsis> SaaS </span> </a> </li> <li class=md-nav__item> <a href=../../sa/resiliency/ class=md-nav__link> <span class=md-ellipsis> Resiliency </span> </a> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> <span class=md-ellipsis> Conduct Design session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Analytics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../analytics/emr/ class=md-nav__link> <span class=md-ellipsis> EMR </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../data/rds/ class=md-nav__link> <span class=md-ellipsis> RDS-Aurora </span> </a> </li> <li class=md-nav__item> <a href=../../data/dynamodb/ class=md-nav__link> <span class=md-ellipsis> DynamoDB </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-lake/ class=md-nav__link> <span class=md-ellipsis> Data Lake </span> </a> </li> <li class=md-nav__item> <a href=../../data/redshift/ class=md-nav__link> <span class=md-ellipsis> RedShift </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> AI-ML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> AI-ML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> <span class=md-ellipsis> All Services </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/sagemaker/ class=md-nav__link> <span class=md-ellipsis> SageMaker </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/bedrock/ class=md-nav__link> <span class=md-ellipsis> Bedrock </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/q/ class=md-nav__link> <span class=md-ellipsis> Amazon Q </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Serverless </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/lambda/ class=md-nav__link> <span class=md-ellipsis> Lambda </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/apigtw/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eks/ class=md-nav__link> <span class=md-ellipsis> EKS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> Messaging </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/msk/ class=md-nav__link> <span class=md-ellipsis> MSK </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eventbridge/ class=md-nav__link> <span class=md-ellipsis> EventBridge </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/stepfct/ class=md-nav__link> <span class=md-ellipsis> Step function </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/mwaa/ class=md-nav__link> <span class=md-ellipsis> MWAA </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Playground </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/ class=md-nav__link> <span class=md-ellipsis> AWS personal labs </span> </a> </li> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> <span class=md-ellipsis> Getting Started EC2 </span> </a> </li> <li class=md-nav__item> <a href=../../playground/security/ class=md-nav__link> <span class=md-ellipsis> Security-IAM demos </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-play/ class=md-nav__link> <span class=md-ellipsis> S3 play </span> </a> </li> <li class=md-nav__item> <a href=../../playground/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> <span class=md-ellipsis> RDS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> <span class=md-ellipsis> Data processing </span> </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> <span class=md-ellipsis> Analytics on EMR </span> </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> <span class=md-ellipsis> S3 storage lens </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> <span class=md-ellipsis> SaaS demo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/ class=md-nav__link> <span class=md-ellipsis> Practices </span> </a> </li> <li class=md-nav__item> <a href=../../coding/sam/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cloudFormation/ class=md-nav__link> <span class=md-ellipsis> CloudFormation </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cdk/ class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> <span class=md-ellipsis> Return to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#virtual-private-cloud class=md-nav__link> <span class=md-ellipsis> Virtual Private Cloud </span> </a> <nav class=md-nav aria-label="Virtual Private Cloud"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#elastic-network-interfaces class=md-nav__link> <span class=md-ellipsis> Elastic Network Interfaces </span> </a> </li> <li class=md-nav__item> <a href=#routing-tables class=md-nav__link> <span class=md-ellipsis> Routing Tables </span> </a> </li> <li class=md-nav__item> <a href=#nat-gateway class=md-nav__link> <span class=md-ellipsis> NAT Gateway </span> </a> </li> <li class=md-nav__item> <a href=#network-acls class=md-nav__link> <span class=md-ellipsis> Network ACLs </span> </a> </li> <li class=md-nav__item> <a href=#vpc-peering class=md-nav__link> <span class=md-ellipsis> VPC peering </span> </a> </li> <li class=md-nav__item> <a href=#transit-gateway class=md-nav__link> <span class=md-ellipsis> Transit Gateway </span> </a> </li> <li class=md-nav__item> <a href=#vpc-endpoint class=md-nav__link> <span class=md-ellipsis> VPC Endpoint </span> </a> </li> <li class=md-nav__item> <a href=#vpc-flow-logs class=md-nav__link> <span class=md-ellipsis> VPC Flow Logs </span> </a> </li> <li class=md-nav__item> <a href=#bastion-host class=md-nav__link> <span class=md-ellipsis> Bastion Host </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive class=md-nav__link> <span class=md-ellipsis> Deeper Dive </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#hybrid-networking class=md-nav__link> <span class=md-ellipsis> Hybrid networking </span> </a> <nav class=md-nav aria-label="Hybrid networking"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client-vpn class=md-nav__link> <span class=md-ellipsis> Client VPN </span> </a> </li> <li class=md-nav__item> <a href=#site-to-site-vpn class=md-nav__link> <span class=md-ellipsis> Site-to-Site VPN </span> </a> </li> <li class=md-nav__item> <a href=#direct-connect class=md-nav__link> <span class=md-ellipsis> Direct Connect </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#extended-picture class=md-nav__link> <span class=md-ellipsis> Extended picture </span> </a> </li> <li class=md-nav__item> <a href=#elastic-load-balancers class=md-nav__link> <span class=md-ellipsis> Elastic Load balancers </span> </a> <nav class=md-nav aria-label="Elastic Load balancers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#four-types-of-elb-supported class=md-nav__link> <span class=md-ellipsis> Four types of ELB supported </span> </a> </li> <li class=md-nav__item> <a href=#load-balancer-stickiness class=md-nav__link> <span class=md-ellipsis> Load balancer stickiness </span> </a> </li> <li class=md-nav__item> <a href=#cross-zone-load-balancing class=md-nav__link> <span class=md-ellipsis> Cross Zone Load Balancing </span> </a> </li> <li class=md-nav__item> <a href=#tls-transport-layer-security class=md-nav__link> <span class=md-ellipsis> TLS - Transport Layer Security, </span> </a> </li> <li class=md-nav__item> <a href=#connection-draining class=md-nav__link> <span class=md-ellipsis> Connection draining </span> </a> </li> <li class=md-nav__item> <a href=#deeper-dive_1 class=md-nav__link> <span class=md-ellipsis> Deeper dive </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cloudfront class=md-nav__link> <span class=md-ellipsis> CloudFront </span> </a> </li> <li class=md-nav__item> <a href=#global-accelerator class=md-nav__link> <span class=md-ellipsis> Global Accelerator </span> </a> </li> <li class=md-nav__item> <a href=#vpn-cloudhub class=md-nav__link> <span class=md-ellipsis> VPN CloudHub </span> </a> </li> <li class=md-nav__item> <a href=#faqs class=md-nav__link> <span class=md-ellipsis> FAQs </span> </a> </li> <li class=md-nav__item> <a href=#traffic-mirroring class=md-nav__link> <span class=md-ellipsis> Traffic mirroring </span> </a> </li> <li class=md-nav__item> <a href=#cloud-wan class=md-nav__link> <span class=md-ellipsis> Cloud WAN </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=networking>Networking<a class=headerlink href=#networking title="Permanent link">&para;</a></h1> <p>All regions are interconnected via private AWS fiber links. This drives better availability, higher performance, lower jitter and reduced costs. Each region has redundant paths to transit centers, which connect via private links to other AWS regions, to AWS Direct Connect customers' data centers, to the internet via peering and paid transit. The connections between AZs is a metro area over DWDM (Dense wavelength division multiplexing) links. 82k fibers in a region. single digit millisecond latency. 25Tbps peak inter AZs traffic. </p> <p>IPv4 allows 3.7 billions of different addresses. Private IP @ is for private network connections. Internet gateway has public and private connections. Public IP can be geo-located. When connected to an EC2, the linux prompt lists the private IP (<code>ec2-user@ip-172-31-18-48</code>). Private IP stays stable on instance restart, while public may change.</p> <p>With Elastic IP address, we can mask an EC2 instance failure by rapidly remapping the address to another instance. The mapping is manual. So better to use DNS. Elastic IP is a public IPv4 that users own as long as they want. EIP can be attached to only one EC2 instance at a time. It is not free.</p> <h2 id=virtual-private-cloud><a href=https://docs.aws.amazon.com/vpc/latest/userguide/what-is-amazon-vpc.html>Virtual Private Cloud</a><a class=headerlink href=#virtual-private-cloud title="Permanent link">&para;</a></h2> <p>A virtual private cloud (VPC) is a virtual network dedicated to one AWS account. All new accounts have a default VPC. It is logically isolated from other virtual networks in the AWS Cloud. Account owner can launch AWS resources, such as Amazon EC2 instances, within the VPC. New EC2 instances are launched into the default VPC if no subnet is specified.</p> <p>When defining new VPC, user needs to specify CIDR, subnets, associate security groups (firewall type of rules), Access Control List, and configure route tables.</p> <p><img alt src=../images/networking/default-vpc.png width=800></p> <p><strong>Figure 1: VPC</strong></p> <p>By default, AWS creates a VPC with default public subnets, one per AZs, they are public because the main route table includes a route to the <strong>Internet Gateway</strong>. <a href=https://docs.aws.amazon.com/vpc/latest/userguide/working-with-igw.html>Internet gateway</a> is a managed service with auto scaling, redundancy and highly availability. It is attached to a VPC in get internet traffic.</p> <p><img alt src=https://docs.aws.amazon.com/images/network-firewall/latest/developerguide/images/arch-igw-natgw.png></p> <p>VPC Helps to:</p> <ul> <li>Assign static IP addresses, potentially multiple addresses for the same EC2 instance.</li> <li>Support changing security group membership for the instances while they're running.</li> <li>Control the outbound traffic from the instances (egress filtering) in addition to controlling the inbound traffic to them (ingress filtering).</li> <li>Users can have multiple VPCs per region (max to 5 but this is a soft limit). 5 maximum CIDRs per VPC.</li> <li>The IP ranges are in 10.x.x.x, 172, or 192 base and a min /28 to a max /16.</li> </ul> <p>Network Access Control List can be defined at the VPC level, so will be shared between subnets. The default network ACL is configured to allow all traffic to flow in and out of the subnets which it is associated to. Each network ACL also includes a rule whose rule number is an asterisk. This rule ensures that if a packet doesn't match any of the other numbered rules, it's denied. </p> <p>The following diagram illustrates classical VPC, with one vpc, two availability zones, two public subnets with EC2 instances within those subnets. An internet gateway is connected to a router. Subnet is defined per availability zone. It defines an IP CIDR range: there should have less IP@ on public subnets as they are used for ELB and very few public facing resources. Most of the service instances should be in private subnets.</p> <p><img alt src=../images/vpc.png width=700></p> <p><strong>Figure 2: EC2s in public subnets</strong></p> <ul> <li><strong>A subnet is assigned a /24 CIDR block, which means 8 bits encoding (8=32-24) for a total of 256 = 2^8 addresses. But AWS uses 5 IP addresses in each subnet for gateway, LB,... so the number of available addresses is 256 - 5 = 251. To identify a single 32 bit IPv4 address, we can use /32 CIDR convention</strong> </li> <li>Users need to define at least one Route Table for the public subnets and one for the private subnets.</li> <li>Non-default subnet has a private IPv4 address, but no public IPv4 address.</li> <li>SRE can make a default subnet into a private subnet by removing the 0.0.0.0/0 route to the Internet Gateway. The route table in figure above defines such route, therefore the subnets are public.</li> <li>EC2 Instances should have either public IP or private IP and attached to the subnet they belong to. Subnet needs a route to the internet gateway. The figure 5 above, illustrates a route going to any IP @ (0.0.0.0/0) via the internet gateway (<code>igw-id</code>). Any host in the private network 172.31.0.0/16 can communicate with other hosts in the local network.</li> <li>Route table defines <code>172.31</code> as local with <code>/16</code> CIDR address range, for internal traffic within the VPC.</li> <li>Because the VPC is cross AZs, we need a router to route between subnets. (See <a href=https://jbcodeforce.github.io/architecture/tcpip>TCP/IP summary</a>)</li> </ul> <h3 id=elastic-network-interfaces>Elastic Network Interfaces<a class=headerlink href=#elastic-network-interfaces title="Permanent link">&para;</a></h3> <p>ENI is a logical component in a VPC that represents a virtual network card. It has the following attributes:</p> <ul> <li>One primary private IPv4, one or more secondary IPv4.</li> <li>One Elastic IP (IPv4) per private IPv4.</li> <li>One Public IPv4 address.</li> <li>One or more security groups.</li> <li>A MAC address.</li> <li>It can be created independently and attach them on the fly (move them) on EC2 instances during failover. It is also attached to any elastic load balancer. ENIs are defined at the account level.</li> <li>Bound to a specific availability zone (AZ), we cannot attach ENI to an EC2 instance in a different AZ. </li> </ul> <p><a href=https://aws.amazon.com/blogs/aws/new-elastic-network-interfaces-in-the-virtual-private-cloud/ >New ENI doc.</a></p> <h3 id=routing-tables>Routing Tables<a class=headerlink href=#routing-tables title="Permanent link">&para;</a></h3> <p>As illustrated in the following diagram, the main routing table defines routes for VPC internal traffic, while custom tables define how inbound and outbound traffic can be structured within a subnet.</p> <p><img alt src=../images/vpc-vpn.png width=700></p> <p><strong>Figure 3: Routing tables</strong></p> <p>EC2 instances in subnet 2 are in private subnet. The corporate network, or on-premises network, can be connected to the VPC via customer gateway deployed on-premises, vitual private GTW in AWS region, and at least one VPN connection between the two gateways.</p> <h3 id=nat-gateway><a href=https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html>NAT Gateway</a><a class=headerlink href=#nat-gateway title="Permanent link">&para;</a></h3> <p>Use a NAT gateway so that EC2 instances in a private subnet can connect to services outside the VPC but external services cannot initiate a connection with those instances. This is a managed service with auto-scaling capability within one AZ. The bandwidth is from 5 Gbps to automatic scale up 45Gbps.</p> <p>Charged for each hour the NAT gateway is available and each Gigabyte of data that it processes.</p> <p>It is created in a specified AZ, public subnet, and uses an Elastic IP and can only be used by EC2 in other subnets. The route is from the private subnet to the NATGW to the IGW. To get HA, configure one NATG per AZ.</p> <h3 id=network-acls>Network ACLs<a class=headerlink href=#network-acls title="Permanent link">&para;</a></h3> <p>Defines traffic rule at the subnet level. One NACL per subnet. A NACL specifies rules with number that defines evaluation priority. The last rule is an asterisk and denies a request in case of no rule conditions match. As soon as a rule matches traffic, it’s applied immediately regardless of any higher-numbered rule that may contradict it.</p> <p><img alt src=../images/nacl-default.png></p> <p><strong>Figure 4: Default NACL</strong> </p> <p>It is used to block a specific external IP address.</p> <p>The VPC automatically comes with a modifiable default network ACL. By default, it allows all inbound and outbound IPv4 traffic and, if applicable, IPv6 traffic. By default, each custom network ACL denies all inbound and outbound traffic until we add rules.</p> <p>Below is a complete figure to explain the process: A web server is initiating a connection to a DB on port 3306 and get response to an ephemeral port (allocated from 1024 to 65535):</p> <p><img alt src=../diagrams/nacl.drawio.png width=1000></p> <p><strong>Figure 5: Connection flow between public to private Apps</strong></p> <p>Each subnet in the VPC must be associated with a network ACL. If you don't explicitly associate a subnet with a network ACL, the subnet is automatically associated with the default network ACL.</p> <table> <thead> <tr> <th>Security Group</th> <th>Network ACL</th> </tr> </thead> <tbody> <tr> <td>Acts as firewall for EC2</td> <td>Acts as firewall for subnet</td> </tr> <tr> <td>Controls inbound &amp; outbound traffic at the instance level</td> <td>Controls inbound &amp; outbound traffic at subnet level</td> </tr> <tr> <td>Supports allow rules</td> <td>Supports deny and allow rules</td> </tr> <tr> <td>Evaluates all rules before deciding to allow traffic</td> <td>Evaluate rules in order</td> </tr> <tr> <td>Instances associated with a SG can't talk to each other unless we add a rule to allow it</td> <td>Each subnet must be associated with a NACL.</td> </tr> </tbody> </table> <h3 id=vpc-peering>VPC peering<a class=headerlink href=#vpc-peering title="Permanent link">&para;</a></h3> <p>The goal of VPC peering is to connect two VPCs using AWS network and let them behave as if they were in the same network. They also work for inter-region and cross-account interconnections.</p> <p>When defining the VPC, the CIDRs should not overlap for IPv4. There is no transitive VPC peering. And there is no edge to edge routing, which means a peered VPC could no go to on-premise server from another VPC, or could not use the internet gateway of another VPC to access internet.</p> <p>Once the VPC peering connection is defined, we still need to specify the routes to the CIDR to reach the peered VPC. VPC uses the longest prefix match to select the specific route. For example, from a VPC_C, the route to 10.0.0.77/32 will go to VPCa-instance77 while a route with 10.0.0.0/16 will go to any instances in the VPC b. Vpc_a and Vpc_b has overlapping CIDR but are not peered together, only to VPC_C.</p> <p>VPC sharing (part of Resource Access Manager) allows multiple AWS accounts to create their application resources such as EC2 instances, RDS databases, Redshift clusters, and Lambda functions, into shared and centrally-managed Amazon Virtual Private Clouds (VPCs). To set this up, the account that owns the VPC (owner) shares one or more subnets with other accounts (participants) that belong to the same Organization from AWS Organizations.</p> <p>After a subnet is shared, the participants can view, create, modify, and delete their application resources in the subnets shared with them. Participants cannot view, modify, or delete resources that belong to other participants or to the VPC owner.</p> <h3 id=transit-gateway><a href=https://aws.amazon.com/transit-gateway/ >Transit Gateway</a><a class=headerlink href=#transit-gateway title="Permanent link">&para;</a></h3> <p>A transit gateway (TGW) is a network transit hub that interconnects attachments (VPCs and VPNs) within the same AWS account or across AWS accounts using Resource Access Manager.</p> <p>This service provides transitive peering between thousands of VPCs and even on-premises servers. It could support hub and spoke connections. It runs on the AWS global private network.</p> <p>Transit Gateway acts as a highly scalable cloud router: each new connection is made only once.</p> <p>It is a regional resource but it can run cross-region. It works with Direct Connect gateway and VPN connections.</p> <p><img alt src=https://docs.aws.amazon.com/images/vpc/latest/tgw/images/direct-connect-tgw.png></p> <p><strong>Figure 6: TGW attachment to Direct Connect Gateway</strong></p> <p>Control the connection vias Route Tables. This is also the only service supporting IP multicast. It addresses the use case of edge to edge routing, so instances in a VPC can access NAT gateway, NLB, PrivateLink, and EFS in other VPCs attached to the transit gateway.</p> <p>Transit Gateway can be peered together as intra-region peering mesh, and as inter-region peering too.</p> <p><img alt src=../diagrams/networking/tg-peering-mesh.drawio.png></p> <p><strong>Figure 7: Peering mesh</strong></p> <p>To increase the bandwidth of the connection to VPC, there is the site to site VPN ECMP (Equal-cost multi-path routing) feature, which is a routing strategy to forward packet over multiple best paths. It uses double tunnels. The VPCs can be from different accounts.</p> <p><img alt src=../diagrams/networking/tg-ecmp.drawio.png></p> <p><strong>Figure 8: Transit Gateway between VPCs and On-premises</strong></p> <p>A transit gateway connects VPCs and on-premises networks through a central hub. An attachment between the transit gateway and a new Direct Connect gateway will extend hybrid connectivity to any VPCs that are associated with the Direct Connect gateway.</p> <ul> <li><a href=https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-centralized-router.html>Centralized router use case</a></li> <li><a href=https://docs.aws.amazon.com/vpc/latest/tgw/transit-gateway-isolated-shared.html>Isolated VPCs with shared services</a>.</li> </ul> <h3 id=vpc-endpoint><a href=https://docs.aws.amazon.com/vpc/latest/privatelink/create-interface-endpoint.html>VPC Endpoint</a><a class=headerlink href=#vpc-endpoint title="Permanent link">&para;</a></h3> <p>An interface VPC endpoint allows to privately connect one Amazon VPC to the supported AWS services without going over the internet. Interface VPC endpoints also connect to endpoint services hosted by other AWS accounts and to AWS Marketplace partner services.</p> <p>Two types of endpoint:</p> <ul> <li><strong>Interface endpoints</strong> powered by PrivateLink: it provisions an ENI in the VPC, with a security group. Pay per hour and GB of data transferred. It can access AWS services such as Simple Queue Service (SQS), Simple Notification Service (SNS), Amazon Kinesis (all except DynamoDB). Can be accessed with site-to-site VPN and Direct Connect. It has a private domain name.</li> <li><strong>Gateway endpoints</strong>: provision a GTW and setup routes in route tables. Used for <strong>S3 and DynamoDB</strong> only. Free. Cannot be extended out of the VPC. One per VPC.</li> </ul> <p><img alt src=../diagrams/networking/vpc-end-pt.drawio.png></p> <p><strong>Figure 9: VPC endpoints</strong></p> <p>VPC Endpoints remove the need of IGW, NATGW to access AWS Services. The service is redundant and scale horizontally.</p> <p>VPC endpoints are defined in Console, SDK API or CDK.</p> <p><img alt src=../images/networking/VPC-endpoints.png></p> <p><strong>Figure 10: VPC endpoints</strong></p> <p>The VPC needs to enable DNS resolution. The same public hostname for S3 can be used, but once the route in the routing table defines the endpoint to be the target to S3 then the traffic will be over AWS private network.</p> <h4 id=vpc-endpoint-policies>VPC Endpoint policies<a class=headerlink href=#vpc-endpoint-policies title="Permanent link">&para;</a></h4> <p>Endpoint Policies are JSON documents to control access to services, controlled at the endpoint level. It does not replace IAM user policies or service specific policies.</p> <p>A endpoint policy can limit access to a SQS queue for a given user or role, then this user can still access the queue from outside of the VPC endpoint. To avoid that the SQS queue policy needs to deny any action not done through the VPC endpoint.</p> <details class="- question"> <summary>How to debug an access to S3 from EC2 in private subnet?</summary> <p><img alt src=../diagrams/networking/ec2-vpc-ep-s3.drawio.png></p> <ol> <li>Verify the security group has outbound rule to get traffic out</li> <li>Verify the VPC endpoint gateway has a policy to allow EC2 connection</li> <li>Be sure a route exists in VPC route table to the S3 bucket to go to the endpoint gateway</li> <li>Verify DNS resolution is enabled in VPC</li> <li>Verify the s3 bucket policy allows the EC2 access</li> <li>Verify the IAM role used by the EC2 has access to the bucket.</li> </ol> <p>See <a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/networking/ec2-vpce-s3>this lab</a> with CDK to set this up.</p> </details> <h3 id=vpc-flow-logs>VPC Flow Logs<a class=headerlink href=#vpc-flow-logs title="Permanent link">&para;</a></h3> <p>Capture IP traffic at the ENI, VPC, subnet level. This is used to monitor and troubleshoot connectivity issues. Can be saved in S3 and CloudWatch logs. It can work on managed service like ELB, RDS, ElastiCache, RedShift, NATGW, Transit Gateway.</p> <p>The log includes src and destination addresses, port number and action done (REJECT/ ACCEPT).</p> <p>When an inboud request is rejected it could be a NACL or SG issue, while if the inbound is accepted but outbound rejected, it is only a NACL issue, as Security Groups are stateful, meaning an accepted inbound connection, makes the outbound also accepted. </p> <p>VPC Flow log is defined within the VPC:</p> <p><img alt src=../images/vpc-flow-logs.png></p> <p><strong>Figure 11: VPC flow logs</strong></p> <p>The Flow can target S3, Kinesis FireHose or CloudWatch</p> <p><img alt src=../images/vpc-flow-create.png></p> <p><strong>Figure 12: VPC flow definition to CloudWatch</strong></p> <p>VPC Flow logs are sources for GuardDuty.</p> <h3 id=bastion-host>Bastion Host<a class=headerlink href=#bastion-host title="Permanent link">&para;</a></h3> <p>The goal is to be able to access any EC2 instances running in the private subnets from outside of the VPC, using SSH. The bastion is running on public subnet, and then connected to the private subnets. </p> <ul> <li> <p>To use a <strong>Bastion Host</strong>, we attach a security group, to the EC2, to authorize inbound SSH and outbound HTTP traffic. CDK creates this SG automatically. So we can use Instance Connect to this instance, and within the terminal a ping to amazon.com will work. The bastion has a public IP address, and the VPC has a IGW with a route table.</p> <p><img alt src=../images/bastion-SG.png></p> <p><strong>Figure 13: Security group for bastion host authorize public access to port 22</strong></p> </li> <li> <p>In the EC2 instance running in the private network, we need to add a Security Group with an inbound rule to specify SSH traffic from the SG of the Bastion. With this settings a SSH to the Bastion, then a copy of the target EC2 pem file in the bastion host and a command like: <code>ssh ec2-user@10.10.2.239 -i ec2.pem</code> on the private IP @ of the EC2 instance (10.10.2.239) will make the connection from Bastion to EC2.</p> <p><img alt src=../images/ec2-sg-private.png></p> <p><strong>Figure 14: Security group for EC2 to accept port 22 from Bastion only</strong></p> </li> </ul> <p>The security group for the Bastion Host authorizies inbound on port 22 from restricted public CIDR. Security group of the EC2 instance allows the SG of the bastion host to accept connection on port 22.</p> <h3 id=deeper-dive>Deeper Dive<a class=headerlink href=#deeper-dive title="Permanent link">&para;</a></h3> <ul> <li><a href=https://aws.amazon.com/vpc/faqs/ >VPC FAQs</a>.</li> <li><a href=https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html>NAT gateway</a>.</li> </ul> <hr> <h2 id=hybrid-networking>Hybrid networking<a class=headerlink href=#hybrid-networking title="Permanent link">&para;</a></h2> <h3 id=client-vpn><a href=https://docs.aws.amazon.com/vpn/latest/clientvpn-user/client-vpn-user-what-is.html>Client VPN </a><a class=headerlink href=#client-vpn title="Permanent link">&para;</a></h3> <p>Managed client-based VPN service to securaly connect to AWS resources.</p> <p><a href=https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/how-it-works.html>How it works</a></p> <h3 id=site-to-site-vpn><a href=https://docs.aws.amazon.com/vpn/latest/s2svpn/VPC_VPN.html>Site-to-Site VPN</a><a class=headerlink href=#site-to-site-vpn title="Permanent link">&para;</a></h3> <p>Connect on-premises network to a VPC, and support IPsec. It uses a customer gateway device or software app to support the site to site connection. It is connected to the target gateway on Amazon side (a virtual private gateway).</p> <h3 id=direct-connect><a href=https://aws.amazon.com/directconnect/ >Direct Connect</a><a class=headerlink href=#direct-connect title="Permanent link">&para;</a></h3> <p>It provides a dedicated connection, over fiver optic cable, from a remote network to the VPC bypassing public internet. The main components are the connections (to a region) and the virtual interfaces to AWS services. 1, 10, 100 Gbps ethernet connection. Supports BGP. \Install a direct connection setup can take more than a month, and it involves AWS Direct Connect Partners. Direct Connect provides three types of virtual interfaces: public, private, and transit:</p> <ul> <li><strong>Public virtual interface</strong>: To connect to AWS resources (like S3, EC2) that are reachable by a public IP address.</li> <li><strong>Private virtual interface</strong>: To connect to resources hosted in a VPC using their private IP addresses.</li> <li><strong>Transit virtual interface</strong>: To connect to resources hosted in VPC through a transit gateway. </li> </ul> <p>To connect to a VPC in the same region, we need to setup a Virtual Private GTW. It is a private connection so it supports better bandwidth throughput at lower cost. It is not encrypted by default.</p> <p><img alt src=../diagrams/networking/direct-conn.drawio.png></p> <p><strong>Figure 15: Direct Connect between on-premise and VPC</strong></p> <p>If we need to access two VPCs in two different regions from the corporate data center then we need a Direct Connect Gateway.</p> <p><img alt src=https://docs.aws.amazon.com/images/directconnect/latest/UserGuide/images/dx-gateway.png></p> <p>As another solution we can connect DC to a transit gateway through a central hub. An attachment between the transit gateway and a new Direct Connect gateway will extend hybrid connectivity to any VPCs that are associated with the Direct Connect gateway.</p> <p><img alt src=https://docs.aws.amazon.com/images/directconnect/latest/UserGuide/images/direct-connect-tgw.png></p> <p>When we want to <strong>encrypt</strong> the traffic flowing through Direct Connect, we need VPN to provide an IPsec-encrypted private connection. VPN over DC will use the public virtual interface.</p> <p>To get reliability, at lower cost, we can setup a VPN site-to-site connection in parallel to the Direct Connect link. For maximum resiliency for critical workloads, it is recommended to have double connections per data center.</p> <p><img alt src=../diagrams/networking/direct-conn-ha.drawio.png></p> <p><strong>Figure 16: Direct Connect HA</strong></p> <p>The Link Aggregation Groups or LAG, helps to get increased speed and failover by aggregate up to 4 connections on active/active mode.</p> <p>Hosted Direct Connect connection supports 50Mbps, 500Mbps, up to 10Gbps, while Dedicated offers higher bandwidth.</p> <p>The main pricing parameter while using the Direct Connect connection is the Data Transfer Out (DTO) from AWS to the on-premises data center, and the port hours. DTO refers to the cumulative network traffic that is sent through AWS Direct Connect to destinations outside of AWS. This is charged per gigabyte (GB), and unlike capacity measurements, DTO refers to the amount of data transferred, not the speed.</p> <hr> <h2 id=extended-picture>Extended picture<a class=headerlink href=#extended-picture title="Permanent link">&para;</a></h2> <p>The following animation is presenting external integration from on-premises servers to AWS services and VPCs via site to site VPN, Private Gateway, Customer Gateway.</p> <p><img alt src=../images/vpc-anim.gif width=width></p> <p><strong>Figure 17: Full VPC diagram</strong></p> <ul> <li>We need to have <a href=https://wa.aws.amazon.com/wellarchitected/2020-07-02T19-33-23/wat.concept.vpc-endpoint.en.html>VPC endpoint service</a> to access <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/aws-services-privatelink-support.html>the AWS services</a>, like S3, privately as they are in our VPC. </li> <li>We need to ensure there is one interface endpoint for each availability zone. </li> <li>We need to pick a subnet in each AZ and add an interface endpoint to that subnet. </li> <li> <p>TCP traffic is isolated. It is part of a larger offering called <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/what-is-privatelink.html>AWS PrivateLink</a> to establish private connectivity between VPCs and services hosted on AWS or on-premises, without exposing data to the internet (No internet gateway, no NAT, no public IP @).</p> </li> <li> <p>CIDR Blocks should not overlap between VPCs for setting up a peering connection. Peering connection is allowed within a region, across regions, across different accounts.</p> </li> <li> <p>We can optionally connect our VPC to our own corporate data center using an IPsec AWS managed VPN connection, making the AWS Cloud an extension of our data center. A VPN connection consists of a virtual private gateway (VGW) attached to our VPC and a customer gateway located in the data center. </p> </li> <li>A Virtual Private Gateway is the VPN concentrator on the Amazon side of the VPN connection. </li> <li> <p>A customer gateway is a physical device or software appliance on the on-premise side of the VPN connection. We need to create a Site-to-site VPN connection between the CP GTW and Customer GTW.</p> </li> <li> <p>As seen in Figure 18 "Full VPC diagram", the <code>VPC peering</code> helps to connect between VPCs in different region, or within the same region. And <a href=https://docs.aws.amazon.com/vpc/latest/tgw/what-is-transit-gateway.html>Transit GTW</a> is used to interconnect our virtual private clouds (VPCs) and on-premises networks. In fact Transit Gateway is a more modern and easier approach to link VPCs. Using Transit Gateway route tables, We can control the traffic flow between VPCs. The peering connection would work; however, it requires a lot of point-to-point connections.</p> </li> <li>If we have multiple AWS Site-to-Site VPN connections, we can provide secure communication between sites using the <a href=https://docs.aws.amazon.com/vpn/latest/s2svpn/VPN_CloudHub.html>AWS VPN CloudHub</a>. This enables our remote sites to communicate with each other, and not just with the VPC. </li> <li>AWS VPN CloudHub operates on a simple hub-and-spoke model that we can use with or without a VPC.</li> </ul> <hr> <h2 id=elastic-load-balancers><a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/what-is-load-balancing.html>Elastic Load balancers</a><a class=headerlink href=#elastic-load-balancers title="Permanent link">&para;</a></h2> <p>Routes traffic into the different EC2 instances, containers or any IP @ end points in one or more AZs. As a managed service, Elastic Load Balancing scales automatically in response to changes in incoming traffic. It is deployed per region.</p> <p>The goal is to improve availability and fault tolerance. It also exposes a single point of access (DNS) to the deployed applications.</p> <p>It uses health check (<code>/health</code> on the app called the <code>ping path</code>) to assess instance availability. It also provides SSL termination. It is used to separate private (internal) to public (external) traffic.</p> <p><img alt src=../diagrams/networking/elb-1.drawio.png></p> <p><strong>Figure 18: ELB</strong></p> <p>When SREs create a load balancer, they must choose whether to make it an internal load balancer or an internet-facing load balancer, and select the availability zones to route traffic to.</p> <p>Internet-facing load balancers have public IP addresses. The DNS name of an internet-facing load balancer is publicly resolvable to the public IP addresses of the nodes. Internal load balancers have only private IP addresses. They can only route requests from clients with access to the VPC of the load balancer.</p> <p><img alt=2 src=../diagrams/networking/elb-scheme.drawio.png></p> <p><strong>Figure 19: Public and private ELBs</strong></p> <p>For certain needs, it also supports stickiness cookie to route to the same EC2 instance. ELB has security group defined for HTTP and HTTPS traffic coming from the internet, and the EC2 security group defines HTTP traffic to the ELB only.</p> <h3 id=four-types-of-elb-supported>Four types of ELB supported<a class=headerlink href=#four-types-of-elb-supported title="Permanent link">&para;</a></h3> <ul> <li><strong>Classic</strong> load balancer: older generation. TCP and HTTP layer. For each instance created, update the load balancer configuration so it can route the traffic.</li> <li> <p><strong>Application load balancer</strong>: HTTP, HTTPS (layer 7), Web Socket. </p> <ul> <li>It specifies availability zones: it routes traffic to the targets within these Availability Zones. To increase availability, use at least two AZs.</li> <li>It uses target groups, to group applications.</li> <li>Routes on URL, hostname and query string.</li> <li>Gets a fixed hostname in DNS.</li> <li>The applications do not see the IP address of the client directly (ELB does a connection termination), but ELB puts client information in the header <code>X-Forwarded-For</code> (IP @), <code>X-Forwarded-Port</code> (port #) and <code>X-Forwarded-Proto</code> (protocol).</li> <li>Great for microservices or for container based apps (ECS).</li> <li>Support dynamic port mapping for ECS container.</li> <li>Support HTTP/2 and WebSocket.</li> </ul> </li> </ul> <div class="admonition info"> <p class=admonition-title>Info</p> <p><strong>Target group</strong>: groups EC2 instances by specifying a Auto Scaling Group. They may be tasks or containers in ECS, or lambda functions. Health check is done at the EC2 or container level. Application Load Balancers are the only load balancers that support the lambda target type.</p> </div> <ul> <li> <p><strong>Network load balancer</strong>: TCP, UDP (layer 4), TLS</p> <ul> <li>Handles millions request/s.</li> <li>Reaches less than 100ms latency while ALB is at 400ms.</li> <li>Uses one public static IP address per availability zone.</li> <li>Routes each individual TCP connection to a single target for the life of the connection. If we specify targets using an instance ID, traffic is routed to instances using the primary private IP address specified in the primary network interface for the instance. If we specify targets using IP addresses, we can route traffic to an instance using any private IP address from one or more network interfaces. This enables multiple applications on an instance to use the same port.</li> <li>Not free.</li> <li>Can reach target groups of EC2s, IP @, or ALB.</li> <li>Health check is based on TCP, HTTP, and HTTPS.</li> <li>For NLB we need to add a rule in the security group attached to the EC2 to get HTTP:80 to anywhere.</li> </ul> </li> <li> <p><strong>Gateway LB</strong>: </p> <ul> <li>Used to analyze in traffic before routing to applications.</li> <li>Applies firewalls rules, intrusion detection, deep packet inspection.</li> <li>Works at layer 3: IP packet.</li> <li>Combine NLB and gateway service.</li> <li>Also use target groups.</li> <li>Use the Geneve protocol (support network virtualization use cases for data centers ) on port 6081 </li> </ul> </li> </ul> <p>To route traffic, first the DNS name of the load balancer is resolved. (They are part of the <code>amazonaws.com</code> domain). 1 to many IP Addresses are sent back to the client. With NLBs, Elastic Load Balancing creates a network interface for each Availability Zone that is enabled. Each load balancer node in the Availability Zone uses this network interface to get a static IP address. ELB scales the load balancer nodes and updates the DNS entry. The time to live is set to 60s.</p> <p>To control that only the load balancer is sending traffic to the application, we need to set up an application <strong>security group</strong> on HTTP, and HTTPS with the source being the security group id of the ELB. LBs can scale but need to engage AWS operational team.</p> <p>HTTP 503 means LB is at capacity or target app is not registered. Verify security group in case of no communication between LB and app.</p> <p>Target group defines the protocol to use, the health check parameters and what applications to reach (instance, IP or lambda). Below is an example of listener rule for an ALB:</p> <p><img alt=3 src=../images/ALB-listener-rules.png></p> <p><strong>Figure 23: ALB rule</strong></p> <p>ALB and Classic can use <a href=https://www.haproxy.com/blog/http-keep-alive-pipelining-multiplexing-and-connection-pooling/ >HTTP connection multiplexing</a> to keep one connection with the backend application. Connection multiplexing improves latency and reduces the load on our applications.</p> <h3 id=load-balancer-stickiness>Load balancer stickiness<a class=headerlink href=#load-balancer-stickiness title="Permanent link">&para;</a></h3> <p>Used when the same client needs to interact with the same backend instance. A cookie, with expiration date, is used to identify the client. The classical LB or ALB manages the routing. This could lead to unbalance traffic so overloading one instance. With ALB, stickness is configured in the target group properties.</p> <p>Two types of cookie:</p> <ul> <li><strong>Application-based cookie</strong>: generated by the target app. The cookie name is specific to the target group. </li> <li><strong>Duration-based cookie</strong>: generated by the Load Balancer.</li> </ul> <p>The following cookie names are reserved by the ELB (AWSALB, AWSALBAPP, AWSALBTG).</p> <h3 id=cross-zone-load-balancing><a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/userguide/how-elastic-load-balancing-works.html#cross-zone-load-balancing>Cross Zone Load Balancing</a><a class=headerlink href=#cross-zone-load-balancing title="Permanent link">&para;</a></h3> <p>Each load balancer instance distributes traffic evenly across all registered instances in all availability zones. </p> <p><img alt src=https://docs.aws.amazon.com/images/elasticloadbalancing/latest/userguide/images/cross_zone_load_balancing_enabled.png></p> <p>If one AZ has 2 targets and another one has 8 targets, then with cross-zone, the LBs in each availability zone will route to any instance, so each will receive 10% of the traffic. Without that, the 2 targets zone will receive 25% traffic each, and the instance on the othe AZ only 6.25% of the traffic. This is the default setting for ALB and free of charge. It is disabled by default for NLB.</p> <h3 id=tls-transport-layer-security>TLS - Transport Layer Security,<a class=headerlink href=#tls-transport-layer-security title="Permanent link">&para;</a></h3> <p>An SSL/TLS Certificate allows traffic between clients and load balancer to be encrypted in transit (in-flight encryption).</p> <ul> <li>Load balancer uses an X.509 certificate (SSL/TLS server certificate).</li> <li>Manage our own certificates using ACM (AWS Certificate Manager).</li> <li>When defining a HTTPS listener in a LB, we must specify a default certificate for the HTTPS protocol, while defining the routing rule to a given target group. Need multiple certs to support multiple domains. </li> <li>Clients can use SNI (Server Name Indication) to specify the hostname they want to reach. The ALB or NLB will get the certificates for each host to support the TLS handshake.</li> </ul> <h3 id=connection-draining>Connection draining<a class=headerlink href=#connection-draining title="Permanent link">&para;</a></h3> <p>This is a setting to control connection timeout and reconnect when an instance is not responding. It is to set up the time to complete “in-flight requests”. When an instance is "draining", ELB stops sending new requests to the instance. The time out can be adjusted, depending of the application, from 1 to 3600 seconds, default is 300 seconds, or disabled (set value to 0).</p> <p>It is called <code>Deregistration Delay</code> in NLB &amp; ALB.</p> <h3 id=deeper-dive_1>Deeper dive<a class=headerlink href=#deeper-dive_1 title="Permanent link">&para;</a></h3> <ul> <li><a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html>Product documentation</a></li> <li><a href=https://catalog.workshops.aws/networking/en-US>Networking Immersion Day - lvl 300</a></li> </ul> <hr> <h2 id=cloudfront><a href=https://aws.amazon.com/cloudfront/ >CloudFront</a><a class=headerlink href=#cloudfront title="Permanent link">&para;</a></h2> <p>Content Delivery Network service with DDoS protection. It caches data to the edge to improve web browsing and application performance. 410+ Edge locations. This is a global service. </p> <p>When configuring we need to specify the origin for the data which could be S3 objects, or Custom Origin resource accessible via HTTP (ALB, EC2...), the caching behavior, and the edge distribution.</p> <p>CloudFront keeps cache for the data read. For the edge to access the S3 bucket, it uses an origin access identity (OAI), managed as IAM role.</p> <p>For EC2 instance, the security group needs to accept traffic from edge location IP addresses.</p> <p>It is possible to control with geographic restriction using whitelist or blacklist.</p> <p>It also supports the concept of signed URL. When we want to distribute content to different user groups over the world, attach a policy with:</p> <ul> <li>URL expiration.</li> <li>IP range to access the data from.</li> <li>Trusted signers (which AWS accounts can create signed URLs).</li> <li>How long should the URL be valid for?</li> <li>Shared content (movie, music): make it short (a few minutes).</li> <li>Private content (private to the user): we can make it last for years.</li> <li>Signed URL = access to individual files (one signed URL per file).</li> <li>Signed Cookies = access to multiple files (one signed cookie for many files).</li> </ul> <p>When the backend content is modified, CloudFront will not get it until its TTL has expired. But we can force an entire cache refresh with CloudFront Invalidation.</p> <p>CloudFront supports HTTP/RTMP (streaming distribution from Adobe) protocol based requests only.</p> <p>The cost is based on the number of HTTP requests, and data transfer. </p> <p>Lambda@Edge is a feature of Amazon CloudFront that lets us run code closer to users of the application, which improves performance and reduces latency. Lambda@Edge runs code in response to events generated by the Amazon CloudFront content delivery network (CDN).</p> <ul> <li><a href=https://aws.amazon.com/cloudfront/faqs/ >CloudFront FAQs</a></li> <li><a href=https://aws.amazon.com/cloudfront/pricing>CloudFront Pricing</a></li> </ul> <h2 id=global-accelerator><a href=https://docs.aws.amazon.com/global-accelerator/latest/dg/what-is-global-accelerator.html>Global Accelerator</a><a class=headerlink href=#global-accelerator title="Permanent link">&para;</a></h2> <p>AWS Global Accelerator is a network layer service that directs traffic to optimal endpoints over the AWS global network, this improves the availability and performance of the internet applications. </p> <p>It is a global service, and it provides two static anycast IP addresses that act as a fixed entry point to the application endpoints in a single or multiple AWS Regions, such as the Application Load Balancers, Network Load Balancers, Elastic IP addresses or Amazon EC2 instances, in a single or in multiple AWS regions.</p> <p>A listener is a process that checks for connection requests that arrive to an assigned set of static IP addresses on a port or port range. It routes traffic to one or more endpoint groups. An endpoint group includes endpoints, such as load balancers.</p> <p>The goal is to expose quickly an application to the WW. The problem is the number of internet hops done to access the target public ALB. The solution is to get as fast as possible to a AWS global network endpoint (Edge location), nearest region to the client. It is a global service.</p> <p>With Anycast IP, a client is routed to the nearest server. All servers hold the same IP address. So for each application, we create 2 Anycast IPs, and the traffic is sent to the edge location.</p> <p>AWS Global Accelerator uses endpoint weights to determine the proportion of traffic that is directed to endpoints in an endpoint group, and traffic dials to control the percentage of traffic that is directed to an endpoint group. We may use it to do blue-green deployments.</p> <p>Global Accelerator is a good fit for non-HTTP use cases, such as gaming (UDP), IoT (MQTT), or Voice over IP.</p> <h2 id=vpn-cloudhub>VPN CloudHub<a class=headerlink href=#vpn-cloudhub title="Permanent link">&para;</a></h2> <p>If we have multiple AWS Site-to-Site VPN connections, we can provide secure communication between sites using the AWS VPN CloudHub. </p> <p>This enables our remote sites to communicate with each other, and not just with the VPC. </p> <p>Sites that use AWS Direct Connect connections to the virtual private gateway can also be part of the AWS VPN CloudHub. </p> <p>The VPN CloudHub operates on a simple hub-and-spoke model that we can use with or without a VPC. </p> <p>This design is suitable if we have multiple branch offices and existing internet connections and would like to implement a convenient, potentially low-cost hub-and-spoke model for primary or backup connectivity between these remote offices.</p> <h2 id=faqs>FAQs<a class=headerlink href=#faqs title="Permanent link">&para;</a></h2> <details class=-> <summary>What differentiates a public subnet from a private subnet?</summary> <p>A public subnet is a subnet that's associated with a route table that has a route to an internet gateway</p> </details> <h2 id=traffic-mirroring><a href=https://docs.aws.amazon.com/vpc/latest/mirroring/traffic-mirroring-how-it-works.html>Traffic mirroring</a><a class=headerlink href=#traffic-mirroring title="Permanent link">&para;</a></h2> <ul> <li>Copies inbound and outbound traffic from the network interfaces attached to EC2 instances.</li> <li>Used to mirror inbound TCP traffic to a single monitoring appliance.</li> <li>Some open source tools to be used as monitoring: <a href=https://zeek.org/ >Zeek</a>, or <a href=https://suricata.io/ >Suricata.io</a></li> </ul> <p><img alt src=https://docs.aws.amazon.com/images/vpc/latest/mirroring/images/traffic-mirroring.png></p> <ul> <li> <p>Classical steps to get started:</p> <ul> <li>Step 1: Create the traffic mirror target</li> <li>Step 2: Create the traffic mirror filter</li> <li>Step 3: Create the traffic mirror session</li> <li>Step 4: Analyze the data</li> </ul> </li> </ul> <h2 id=cloud-wan><a href=https://docs.aws.amazon.com/network-manager/latest/cloudwan/what-is-cloudwan.html>Cloud WAN</a><a class=headerlink href=#cloud-wan title="Permanent link">&para;</a></h2> <p>The goal is to build a global network to interconnect VPCs via transit gateways oand other Cloud WAN, on-premises environments, using a single central dashboard. It uses the concept of <strong>core network policy</strong> to define what we want the network to be.</p> <p><a href=https://aws.amazon.com/blogs/networking-and-content-delivery/aws-cloud-wan-and-aws-transit-gateway-migration-and-interoperability-patterns/ >AWS Cloud WAN and AWS Transit Gateway migration and interoperability patterns</a></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: EC2-others"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> EC2-others </div> </div> </a> <a href=../security/ class="md-footer__link md-footer__link--next" aria-label="Next: Security"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Security </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> </body> </html>