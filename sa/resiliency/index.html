<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jerome Boyer"><link href=../saas/ rel=prev><link href=../../templ/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>Resiliency - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#resiliency class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Resiliency </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infra/ class=md-nav__link> <span class=md-ellipsis> EC2-others </span> </a> </li> <li class=md-nav__item> <a href=../../infra/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../infra/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../infra/storage/ class=md-nav__link> <span class=md-ellipsis> S3-Storage </span> </a> </li> <li class=md-nav__item> <a href=../../infra/route53/ class=md-nav__link> <span class=md-ellipsis> Route 53 </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/cost/ class=md-nav__link> <span class=md-ellipsis> Cost mgt </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../well-architectured/ class=md-nav__link> <span class=md-ellipsis> Well Architectured </span> </a> </li> <li class=md-nav__item> <a href=../sol-design/ class=md-nav__link> <span class=md-ellipsis> Solution design </span> </a> </li> <li class=md-nav__item> <a href=../psa-role/ class=md-nav__link> <span class=md-ellipsis> SA </span> </a> </li> <li class=md-nav__item> <a href=../saas/ class=md-nav__link> <span class=md-ellipsis> SaaS </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Resiliency </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Resiliency </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#assessing-resiliency-needs class=md-nav__link> <span class=md-ellipsis> Assessing resiliency needs </span> </a> </li> <li class=md-nav__item> <a href=#disaster-recovery class=md-nav__link> <span class=md-ellipsis> Disaster recovery </span> </a> <nav class=md-nav aria-label="Disaster recovery"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#region-az class=md-nav__link> <span class=md-ellipsis> Region, AZ </span> </a> </li> <li class=md-nav__item> <a href=#strategies-for-dr class=md-nav__link> <span class=md-ellipsis> Strategies for DR </span> </a> </li> <li class=md-nav__item> <a href=#route-53-arc class=md-nav__link> <span class=md-ellipsis> Route 53 ARC </span> </a> </li> <li class=md-nav__item> <a href=#elastic-disaster-recovery class=md-nav__link> <span class=md-ellipsis> Elastic Disaster Recovery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#high-availability class=md-nav__link> <span class=md-ellipsis> High Availability </span> </a> <nav class=md-nav aria-label="High Availability"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#measuring-availability class=md-nav__link> <span class=md-ellipsis> Measuring availability </span> </a> </li> <li class=md-nav__item> <a href=#latency class=md-nav__link> <span class=md-ellipsis> Latency </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resiliency-patterns class=md-nav__link> <span class=md-ellipsis> Resiliency Patterns </span> </a> </li> <li class=md-nav__item> <a href=#fault-isolation-concepts class=md-nav__link> <span class=md-ellipsis> Fault isolation concepts </span> </a> </li> <li class=md-nav__item> <a href=#aws-partitions class=md-nav__link> <span class=md-ellipsis> AWS Partitions </span> </a> </li> <li class=md-nav__item> <a href=#cell-based-architecture-and-shuffle-sharding class=md-nav__link> <span class=md-ellipsis> Cell-based architecture and shuffle sharding </span> </a> </li> <li class=md-nav__item> <a href=#multi-az-patterns-az-gray-failure class=md-nav__link> <span class=md-ellipsis> Multi-AZ patterns: AZ gray failure </span> </a> </li> <li class=md-nav__item> <a href=#sources class=md-nav__link> <span class=md-ellipsis> Sources </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> <span class=md-ellipsis> Conduct Design session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Analytics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../analytics/emr/ class=md-nav__link> <span class=md-ellipsis> EMR </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../data/rds/ class=md-nav__link> <span class=md-ellipsis> RDS-Aurora </span> </a> </li> <li class=md-nav__item> <a href=../../data/dynamodb/ class=md-nav__link> <span class=md-ellipsis> DynamoDB </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-lake/ class=md-nav__link> <span class=md-ellipsis> Data Lake </span> </a> </li> <li class=md-nav__item> <a href=../../data/redshift/ class=md-nav__link> <span class=md-ellipsis> RedShift </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> AI-ML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> AI-ML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> <span class=md-ellipsis> All Services </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/sagemaker/ class=md-nav__link> <span class=md-ellipsis> SageMaker </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/bedrock/ class=md-nav__link> <span class=md-ellipsis> Bedrock </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/q/ class=md-nav__link> <span class=md-ellipsis> Amazon Q </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Serverless </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/lambda/ class=md-nav__link> <span class=md-ellipsis> Lambda </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/apigtw/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eks/ class=md-nav__link> <span class=md-ellipsis> EKS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> Messaging </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/msk/ class=md-nav__link> <span class=md-ellipsis> MSK </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eventbridge/ class=md-nav__link> <span class=md-ellipsis> EventBridge </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/stepfct/ class=md-nav__link> <span class=md-ellipsis> Step function </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/mwaa/ class=md-nav__link> <span class=md-ellipsis> MWAA </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Playground </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/ class=md-nav__link> <span class=md-ellipsis> AWS personal labs </span> </a> </li> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> <span class=md-ellipsis> Getting Started EC2 </span> </a> </li> <li class=md-nav__item> <a href=../../playground/security/ class=md-nav__link> <span class=md-ellipsis> Security-IAM demos </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-play/ class=md-nav__link> <span class=md-ellipsis> S3 play </span> </a> </li> <li class=md-nav__item> <a href=../../playground/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> <span class=md-ellipsis> RDS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> <span class=md-ellipsis> Data processing </span> </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> <span class=md-ellipsis> Analytics on EMR </span> </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> <span class=md-ellipsis> S3 storage lens </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> <span class=md-ellipsis> SaaS demo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/ class=md-nav__link> <span class=md-ellipsis> Practices </span> </a> </li> <li class=md-nav__item> <a href=../../coding/sam/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cloudFormation/ class=md-nav__link> <span class=md-ellipsis> CloudFormation </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cdk/ class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> <span class=md-ellipsis> Return to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#assessing-resiliency-needs class=md-nav__link> <span class=md-ellipsis> Assessing resiliency needs </span> </a> </li> <li class=md-nav__item> <a href=#disaster-recovery class=md-nav__link> <span class=md-ellipsis> Disaster recovery </span> </a> <nav class=md-nav aria-label="Disaster recovery"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#region-az class=md-nav__link> <span class=md-ellipsis> Region, AZ </span> </a> </li> <li class=md-nav__item> <a href=#strategies-for-dr class=md-nav__link> <span class=md-ellipsis> Strategies for DR </span> </a> </li> <li class=md-nav__item> <a href=#route-53-arc class=md-nav__link> <span class=md-ellipsis> Route 53 ARC </span> </a> </li> <li class=md-nav__item> <a href=#elastic-disaster-recovery class=md-nav__link> <span class=md-ellipsis> Elastic Disaster Recovery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#high-availability class=md-nav__link> <span class=md-ellipsis> High Availability </span> </a> <nav class=md-nav aria-label="High Availability"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#measuring-availability class=md-nav__link> <span class=md-ellipsis> Measuring availability </span> </a> </li> <li class=md-nav__item> <a href=#latency class=md-nav__link> <span class=md-ellipsis> Latency </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resiliency-patterns class=md-nav__link> <span class=md-ellipsis> Resiliency Patterns </span> </a> </li> <li class=md-nav__item> <a href=#fault-isolation-concepts class=md-nav__link> <span class=md-ellipsis> Fault isolation concepts </span> </a> </li> <li class=md-nav__item> <a href=#aws-partitions class=md-nav__link> <span class=md-ellipsis> AWS Partitions </span> </a> </li> <li class=md-nav__item> <a href=#cell-based-architecture-and-shuffle-sharding class=md-nav__link> <span class=md-ellipsis> Cell-based architecture and shuffle sharding </span> </a> </li> <li class=md-nav__item> <a href=#multi-az-patterns-az-gray-failure class=md-nav__link> <span class=md-ellipsis> Multi-AZ patterns: AZ gray failure </span> </a> </li> <li class=md-nav__item> <a href=#sources class=md-nav__link> <span class=md-ellipsis> Sources </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=resiliency>Resiliency<a class=headerlink href=#resiliency title="Permanent link">&para;</a></h1> <p>Resiliency is the ability of a workload to recover from infrastructure or service disruptions, dynamically acquire computing resources to meet demand, and mitigate disruptions, such as misconfigurations or transient network issues. It addresses <strong>DR</strong> (restore service) and <strong>Availability</strong> (prevent loss of service).</p> <p><img alt src=../diagrams/resiliency.drawio.png></p> <p>Apply the sharing responsibility of resiliency: AWS for resiliency <strong>of</strong> the cloud: infrastructure. Customer responsible for resiliency <strong>in</strong> the cloud: adopting instance deployment across multiple locations, support self-healing, design for resilience.</p> <h3 id=assessing-resiliency-needs>Assessing resiliency needs<a class=headerlink href=#assessing-resiliency-needs title="Permanent link">&para;</a></h3> <ul> <li>Start by looking at business impact: assess cost of downtime? business metrics used to measure impact? and existing metrics and tools to compute outage impact. 70% of CIO wants to be resilient, 80% have nothing in place, and most has no real metrics.</li> <li>Assess what is the current method to detect downtime, and the definition of downtime. Moving to a standby region cost time and effort, getting a clear assessment of what downtime means is very important before triggering the failover. Is it latency? is it missing orders?</li> <li>Get an application inventory by category of criticality, including compliance requirements</li> <li>What is the process in place to alert human for downtime?</li> <li>What are the current observability practice?</li> <li>What is the recovery strategy?</li> </ul> <p><a href=https://docs.aws.amazon.com/wellarchitecttandted/latest/operational-readiness-reviews/wa-operational-readiness-reviews.html>Operational Readiness Review (ORR)</a> has questions and tools to help understand current state, assess risks, and presents best practices to create highly available, resilient systems. </p> <h2 id=disaster-recovery>Disaster recovery<a class=headerlink href=#disaster-recovery title="Permanent link">&para;</a></h2> <p>DR is about business continuity. Review the core principles of DR in <a href=https://jbcodeforce.github.io/architecture/DR/ >this note</a> and then the <a href=https://docs.aws.amazon.com/whitepapers/latest/disaster-recovery-workloads-on-aws/disaster-recovery-options-in-the-cloud.html>AWS options whitepaper</a>. Recalls the important recovery metrics of RTO and RPO, while for availability we measure mean over time (99.99%), and the assessment of the <a href=http://jbcodeforce.github.io/architecture/DR/#different-implementations-at-different-costs>acceptable recovery cost</a> to select the best solution possible.</p> <p>DR in the cloud, AZ is the equivalent of data center for on-premises deployment, also users are responsible for backups and need to assess the Multi-region deployment. The DR site does not need to have the same capacity at first to run back the business. Most of the serverless platform supports HA and elastic scaling.</p> <h3 id=region-az>Region, AZ<a class=headerlink href=#region-az title="Permanent link">&para;</a></h3> <ul> <li>Region and AZs are the building blocks to support HA and DR in the cloud. With very low latency network between AZs we can do in-synch replicas.</li> <li>Non-AZ affinity: a write operation can cross AZs and with data replications, it can make a lot of hops.</li> <li>AZ-affinity helps to reduce the number of hops, but it enforces using NLB and not ALB.</li> </ul> <h3 id=strategies-for-dr>Strategies for DR<a class=headerlink href=#strategies-for-dr title="Permanent link">&para;</a></h3> <ul> <li><strong>Backup/restore</strong> is for lower priority workload, cost less, and provision cloud resources after the event. RTO/RPO in hours</li> <li><strong>Pilot Light</strong>: Data is live but services are idle. Provision some resource and scale after event. RPO/RTO on 10s of minutes</li> <li><strong>Warm standby</strong>: The DR site is always running but smaller scale. Resources will scale after the event. RPO/RTO at the minutes level.</li> <li><strong>Multi-site active/active</strong>: Zero downtime, near zero data loss. This is really for mission critical services. </li> </ul> <h3 id=route-53-arc>Route 53 ARC<a class=headerlink href=#route-53-arc title="Permanent link">&para;</a></h3> <p>See <a href=../../infra/route53/#route-53-arc>dedicated note on Route 53 ARC</a> to support resiliency.</p> <h3 id=elastic-disaster-recovery><a href=https://docs.aws.amazon.com/drs/latest/userguide/what-is-drs.html>Elastic Disaster Recovery</a><a class=headerlink href=#elastic-disaster-recovery title="Permanent link">&para;</a></h3> <p>Helps to support application DR from on-premises to AWS or cloud based apps. It uses a Replication agent on source server to replicate data to AWS region and account.</p> <p>It supports testing non-disruptive recovery and fallback drills, replications monitoring.</p> <h2 id=high-availability>High Availability<a class=headerlink href=#high-availability title="Permanent link">&para;</a></h2> <p>It is not DR. Here is a classical AWS deployment for HA, where Apps running on EC2, ELB, Database are deployed in 3 AZs.</p> <p><img alt src=../diagrams/stateful-quarkus-app.drawio.svg></p> <p>S3 and DynamoDB are also deployed in AWS AZs outside of the customer's VPC.</p> <p>Availability is measured as:</p> <p><img alt src="https://latex.codecogs.com/svg.image?availability=uptime/(uptime+downtime)"></p> <p>It cannot be better than it's least available dependency.</p> <p><img alt src="https://latex.codecogs.com/svg.image?availability=a_1*a_2*...*a_n&space;"></p> <p>Spare components improves availability. Multi-AZ deployment improve availability.</p> <h3 id=measuring-availability>Measuring availability<a class=headerlink href=#measuring-availability title="Permanent link">&para;</a></h3> <p>Metrics to consider:</p> <ul> <li>Mean time between failure MTBF, try to increase it</li> <li>Mean time to detection MTTD</li> <li> <p>Mean time to repair MTTR</p> </li> <li> <p>Consider server-side and client-side request success rate. Define what unit of work to be used: HTTP request, message in queue, async job.</p> </li> <li>Define downtime, for example, drop below 95% availabiltiy for any API during a 5 minutes window.</li> </ul> <p><strong>Use CW embedded metric format EMF to combine logs and metrics</strong></p> <h3 id=latency>Latency<a class=headerlink href=#latency title="Permanent link">&para;</a></h3> <p>Latency impacts availability. Analyze histograms for latency distribution trends. Use percentiles and trimmed man to measure latency.</p> <h2 id=resiliency-patterns>Resiliency Patterns<a class=headerlink href=#resiliency-patterns title="Permanent link">&para;</a></h2> <p>Need to see it from the client or/and server side:</p> <ul> <li>Client side, use circuit braker, retries with jitter, multiplexing connection with new protocol like HTTP/3, gRPC</li> <li>Server side, apply caching strategy, cache-aside is more resilient, inline cache, like DynamoDB DAX, may be a single point of failure. </li> </ul> <h2 id=fault-isolation-concepts>Fault isolation concepts<a class=headerlink href=#fault-isolation-concepts title="Permanent link">&para;</a></h2> <ul> <li>Control plane is a complex orchestration with many dependencies so is more difficult to make it resilient. But the lower level of APIs makes it less risky. Still they will fail more often. Latency is not a strong requirement, 100s ms.</li> <li>Do not rely on Auto Scaling Group for EC2 in case of AZ failure, but plan for overcapacity to support the load after AZ failure.</li> <li> <p>Examples of control plan and data plane:</p> <table> <thead> <tr> <th>Service</th> <th>Control plane</th> <th>Data plane</th> </tr> </thead> <tbody> <tr> <td>Amazon S3</td> <td>create bucket, put bucket policy</td> <td>GetObject, PutObject</td> </tr> <tr> <td>DynamoDB</td> <td>Create table, update table</td> <td>GetItem ...</td> </tr> <tr> <td>ELB</td> <td>CreateLoadBalancer, CreateTargetGroup</td> <td>The load balancer itself</td> </tr> <tr> <td>EKS</td> <td>CreateCluster, PodScheduling, scale worker nodes</td> <td>worker node, pod</td> </tr> <tr> <td>Route 53</td> <td>CreateHostedZone ...</td> <td>DNS resolution, health checks</td> </tr> <tr> <td>IAM</td> <td>CreateRole</td> <td>Authn, Authz</td> </tr> <tr> <td>RDS</td> <td>Create DB instance</td> <td>The data base</td> </tr> </tbody> </table> </li> <li> <p>Static stability: system still running even dependencies fail without the need to make changes. Use the following approaches: prevent circular dependencies, pre-provision capacity, maintain existing state, eliminate synchronous interaction.</p> </li> <li>One way AWS achieve static statbility is by removing control plane deplendencis from the data plane in AWS services. </li> <li>Relying on data plane operations for recovery can help make the system more staticall stable, this may include pre-provisioning resources, or relying on data plane operations.</li> </ul> <h2 id=aws-partitions>AWS Partitions<a class=headerlink href=#aws-partitions title="Permanent link">&para;</a></h2> <p>AWS Partitions are isolated infrastructure and services. It include<em><em>s </em>commercial partition</em>, <em>China</em> , and <em>GovCloud</em>. Within a partition there are regions. There is no cross IAM definition sharing.</p> <table> <thead> <tr> <th>Type</th> <th>Service</th> <th>Planes</th> </tr> </thead> <tbody> <tr> <td>Zonal</td> <td>RDS, EC2, EBS</td> <td>Control plane is regional while data plane is zonal</td> </tr> <tr> <td>Regional</td> <td>S3, SQS, DynamoDB</td> <td>Control plane and data plane are regional</td> </tr> <tr> <td>Global</td> <td>CloudFront, Global accelerator, Route 53, IAM</td> <td>Control plane is single region and data plane is global</td> </tr> </tbody> </table> <p>There are three categories of global services: partitional, Edge and globally-scoped operations. Global services have a single control plane and a distributed, highly available data plane. Avoid control plane dependencies in global services in the recovery path, implement static stability.</p> <h2 id=cell-based-architecture-and-shuffle-sharding><a href="https://aws.amazon.com/solutions/guidance/cell-based-architecture-on-aws/?did=sl_card&trk=sl_card">Cell-based architecture</a> and shuffle sharding<a class=headerlink href=#cell-based-architecture-and-shuffle-sharding title="Permanent link">&para;</a></h2> <p>Goal is to reduce the blast-radius. Use the concept of <code>Cell</code> which is a construct to isolate compute, routing, and storage (workload). Cells are not AZs but cross AZs. Cell shares nothing with each other. Cell can scale-up and out. Cell have a maximum size.</p> <p>It is not fitting for all type of workloads.</p> <p>API Gateway uses this Cell-based architecture.</p> <p>Some e-commerce fullfilment delivery centers use cell-based architecture.</p> <p>Considerations to address:</p> <ul> <li>Cell size</li> <li>Router robustness</li> <li>Partitioning dimension</li> <li>Cross-cell use cases</li> <li>Cell migration</li> <li>Alignment to AZs and Regions</li> </ul> <p>Shards is another construct to isolate blast radius, but not at the level of resources. Any serverless services is using the concept of shuffle sharding.</p> <h2 id=multi-az-patterns-az-gray-failure>Multi-AZ patterns: AZ gray failure<a class=headerlink href=#multi-az-patterns-az-gray-failure title="Permanent link">&para;</a></h2> <ul> <li>System follows differential observability. </li> <li>Different perspective: system versus application</li> </ul> <p>Detection tools:</p> <ul> <li>cloudwatch insights. </li> </ul> <h2 id=sources>Sources<a class=headerlink href=#sources title="Permanent link">&para;</a></h2> <ul> <li><a href="https://www.youtube.com/watch?v=cJZw5mrxryA">DR of workloads on AWS video.</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../saas/ class="md-footer__link md-footer__link--prev" aria-label="Previous: SaaS"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> SaaS </div> </div> </a> <a href=../../templ/ class="md-footer__link md-footer__link--next" aria-label="Next: Conduct Design session"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Conduct Design session </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> </body> </html>