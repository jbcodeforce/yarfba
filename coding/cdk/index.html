<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jerome Boyer"><link href=../cloudFormation/ rel=prev><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>CDK - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#cloud-development-kit-cdk class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> CDK </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infra/ class=md-nav__link> <span class=md-ellipsis> EC2-others </span> </a> </li> <li class=md-nav__item> <a href=../../infra/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../infra/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../infra/storage/ class=md-nav__link> <span class=md-ellipsis> S3-Storage </span> </a> </li> <li class=md-nav__item> <a href=../../infra/route53/ class=md-nav__link> <span class=md-ellipsis> Route 53 </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/cost/ class=md-nav__link> <span class=md-ellipsis> Cost mgt </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sa/well-architectured/ class=md-nav__link> <span class=md-ellipsis> Well Architectured </span> </a> </li> <li class=md-nav__item> <a href=../../sa/sol-design/ class=md-nav__link> <span class=md-ellipsis> Solution design </span> </a> </li> <li class=md-nav__item> <a href=../../sa/psa-role/ class=md-nav__link> <span class=md-ellipsis> SA </span> </a> </li> <li class=md-nav__item> <a href=../../sa/saas/ class=md-nav__link> <span class=md-ellipsis> SaaS </span> </a> </li> <li class=md-nav__item> <a href=../../sa/resiliency/ class=md-nav__link> <span class=md-ellipsis> Resiliency </span> </a> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> <span class=md-ellipsis> Conduct Design session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Analytics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../analytics/emr/ class=md-nav__link> <span class=md-ellipsis> EMR </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../data/rds/ class=md-nav__link> <span class=md-ellipsis> RDS-Aurora </span> </a> </li> <li class=md-nav__item> <a href=../../data/dynamodb/ class=md-nav__link> <span class=md-ellipsis> DynamoDB </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-lake/ class=md-nav__link> <span class=md-ellipsis> Data Lake </span> </a> </li> <li class=md-nav__item> <a href=../../data/redshift/ class=md-nav__link> <span class=md-ellipsis> RedShift </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> AI-ML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> AI-ML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> <span class=md-ellipsis> All Services </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/sagemaker/ class=md-nav__link> <span class=md-ellipsis> SageMaker </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/bedrock/ class=md-nav__link> <span class=md-ellipsis> Bedrock </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/q/ class=md-nav__link> <span class=md-ellipsis> Amazon Q </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Serverless </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/lambda/ class=md-nav__link> <span class=md-ellipsis> Lambda </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/apigtw/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eks/ class=md-nav__link> <span class=md-ellipsis> EKS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> Messaging </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/msk/ class=md-nav__link> <span class=md-ellipsis> MSK </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eventbridge/ class=md-nav__link> <span class=md-ellipsis> EventBridge </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/stepfct/ class=md-nav__link> <span class=md-ellipsis> Step function </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/mwaa/ class=md-nav__link> <span class=md-ellipsis> MWAA </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Playground </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/ class=md-nav__link> <span class=md-ellipsis> AWS personal labs </span> </a> </li> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> <span class=md-ellipsis> Getting Started EC2 </span> </a> </li> <li class=md-nav__item> <a href=../../playground/security/ class=md-nav__link> <span class=md-ellipsis> Security-IAM demos </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-play/ class=md-nav__link> <span class=md-ellipsis> S3 play </span> </a> </li> <li class=md-nav__item> <a href=../../playground/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> <span class=md-ellipsis> RDS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> <span class=md-ellipsis> Data processing </span> </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> <span class=md-ellipsis> Analytics on EMR </span> </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> <span class=md-ellipsis> S3 storage lens </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> <span class=md-ellipsis> SaaS demo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9 checked> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=true> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Practices </span> </a> </li> <li class=md-nav__item> <a href=../sam/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> <li class=md-nav__item> <a href=../cloudFormation/ class=md-nav__link> <span class=md-ellipsis> CloudFormation </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> CDK </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> CDK </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#advantages class=md-nav__link> <span class=md-ellipsis> Advantages </span> </a> </li> <li class=md-nav__item> <a href=#some-caveats class=md-nav__link> <span class=md-ellipsis> Some caveats </span> </a> </li> <li class=md-nav__item> <a href=#install class=md-nav__link> <span class=md-ellipsis> Install </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=#useful-cdk-commands class=md-nav__link> <span class=md-ellipsis> Useful CDK commands </span> </a> </li> <li class=md-nav__item> <a href=#samples class=md-nav__link> <span class=md-ellipsis> Samples </span> </a> <nav class=md-nav aria-label=Samples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cdk-python-for-an-ec2 class=md-nav__link> <span class=md-ellipsis> CDK Python for an EC2 </span> </a> </li> <li class=md-nav__item> <a href=#some-personal-examples class=md-nav__link> <span class=md-ellipsis> Some personal examples </span> </a> </li> <li class=md-nav__item> <a href=#cdk-blueprint-for-eks class=md-nav__link> <span class=md-ellipsis> CDK Blueprint for EKS </span> </a> </li> <li class=md-nav__item> <a href=#other-tools-samples class=md-nav__link> <span class=md-ellipsis> Other tools - samples </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#some-how-tos class=md-nav__link> <span class=md-ellipsis> Some how-tos </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> <span class=md-ellipsis> Return to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#advantages class=md-nav__link> <span class=md-ellipsis> Advantages </span> </a> </li> <li class=md-nav__item> <a href=#some-caveats class=md-nav__link> <span class=md-ellipsis> Some caveats </span> </a> </li> <li class=md-nav__item> <a href=#install class=md-nav__link> <span class=md-ellipsis> Install </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=#useful-cdk-commands class=md-nav__link> <span class=md-ellipsis> Useful CDK commands </span> </a> </li> <li class=md-nav__item> <a href=#samples class=md-nav__link> <span class=md-ellipsis> Samples </span> </a> <nav class=md-nav aria-label=Samples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cdk-python-for-an-ec2 class=md-nav__link> <span class=md-ellipsis> CDK Python for an EC2 </span> </a> </li> <li class=md-nav__item> <a href=#some-personal-examples class=md-nav__link> <span class=md-ellipsis> Some personal examples </span> </a> </li> <li class=md-nav__item> <a href=#cdk-blueprint-for-eks class=md-nav__link> <span class=md-ellipsis> CDK Blueprint for EKS </span> </a> </li> <li class=md-nav__item> <a href=#other-tools-samples class=md-nav__link> <span class=md-ellipsis> Other tools - samples </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#some-how-tos class=md-nav__link> <span class=md-ellipsis> Some how-tos </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=cloud-development-kit-cdk><a href=https://docs.aws.amazon.com/cdk/v2/guide/home.html>Cloud Development Kit - CDK</a><a class=headerlink href=#cloud-development-kit-cdk title="Permanent link">&para;</a></h1> <p>The AWS CDK lets us build reliable, scalable, cost-effective applications in AWS cloud with the different programming languages such as Go, Java, Python, C#, JavaScript, Typescript. </p> <p>Build with high-level constructs to define any AWS resources with less code. The output of an AWS CDK program is an AWS CloudFormation template which can be deployed with the cdk CLI.</p> <h2 id=advantages>Advantages<a class=headerlink href=#advantages title="Permanent link">&para;</a></h2> <ul> <li>Developers write IaC code in their programming language, with the power of the language to do more complex things than in templates. </li> <li>More flexible than SAM and less complex than CloudFormation templates.</li> <li>Custom CDK constructs let developers encode and share security best practices and compliance measures across the enterprise.</li> <li>Easier way to create lots of similar resources.</li> <li>Ability to abstract truly boilerplate stuff like a VPC.</li> </ul> <h2 id=some-caveats>Some caveats<a class=headerlink href=#some-caveats title="Permanent link">&para;</a></h2> <ul> <li>Multiple programming language means different developer groups will use different CDK implementation, leading to governance issues. In most enterprise it is not that relevant, and teams are still quite isolated and applying agile manifesto, use the tools they are more confortable to be efficient.</li> <li>CDK abstraction level is may be too high and we have to learn by increment to clearly understand what each construct is really building as AWS resources. </li> <li>It's easy to create a mess of resources without understanding the underlying purpose or intent.</li> <li>With groups with clear separation between Ops and Dev teams, then SREs may not be able to support CDK apps.</li> <li>A framework like SAM dictates how to do configuration, CDK libraries gives us contructs to work with.</li> <li>Code and infrastructure code orgranization is a challenge and need strong practices to avoid not understanding what is what and what the deployment does. Often CloudFormation or SAM are better to understand.</li> <li>At some point, we need to learn CloudFormation fundamentals, as when the If deployment fails, we have to go at the CloudFormation level.</li> </ul> <h2 id=install>Install<a class=headerlink href=#install title="Permanent link">&para;</a></h2> <p>The CDK cli is packaged as nodejs app. To install it:</p> <div class=highlight><pre><span></span><code>npm<span class=w> </span>install<span class=w> </span>-g<span class=w> </span>aws-cdk<span class=w> </span>
</code></pre></div> <p>A docker file exists under the <code>labs</code> folder to get an environment with nodes, python 3.9, AWS CLI, CDK CLI...</p> <div class=highlight><pre><span></span><code><span class=c1># build the docker</span>
docker<span class=w> </span>build<span class=w> </span>-t<span class=w> </span>jbcodeforce/aws-python<span class=w> </span>.
<span class=c1># Start the env</span>
./startPythonDocker.sh
<span class=c1># verify installation</span>
aws<span class=w> </span>s3<span class=w> </span>ls
cdk<span class=w> </span>--version
<span class=c1># In app folder and where the cdk.json file is, do</span>
cdk<span class=w> </span>synth
</code></pre></div> <h2 id=concepts>Concepts<a class=headerlink href=#concepts title="Permanent link">&para;</a></h2> <p>A CDK app defines one or more Stacks (= CloudFormation stack). A Stack includes a set of Constructs. Each Construct defines one or more concrete AWS resources.</p> <p>Constructs, Stacks and apps, are represented as classes (types) in the selected programming language. We instantiate constructs within a Stack to declare them to AWS, and connect them to each other using well-defined interfaces. CDK includes a collection of constructs called the <a href=https://docs.aws.amazon.com/cdk/api/v2/python/index.html>AWS Construct Python Library - V2</a> and a <a href=https://constructs.dev/ >Construct hub</a> to share them.</p> <p>Here is an example of constructs defined in a Python class constructor for a lambda function and an API Gateway:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>aws_cdk</span> <span class=kn>import</span> <span class=p>(</span><span class=n>Stack</span><span class=p>,</span><span class=n>aws_lambda</span><span class=p>,</span><span class=n>aws_apigw</span><span class=p>)</span>

<span class=k>class</span> <span class=nc>MyLambdaStack</span><span class=p>(</span><span class=n>Stack</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scope</span><span class=p>:</span> <span class=n>Construct</span><span class=p>,</span> <span class=n>construct_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>scope</span><span class=p>,</span> <span class=n>construct_id</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=n>my_lambda</span> <span class=o>=</span> <span class=n>aws_lambda</span><span class=o>.</span><span class=n>Function</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;HelloHandler&#39;</span><span class=p>,</span>
            <span class=n>runtime</span><span class=o>=</span><span class=n>aws_lambda</span><span class=o>.</span><span class=n>Runtime</span><span class=o>.</span><span class=n>PYTHON_3_9</span><span class=p>,</span>
            <span class=n>code</span><span class=o>=</span><span class=n>aws_lambda</span><span class=o>.</span><span class=n>Code</span><span class=o>.</span><span class=n>from_asset</span><span class=p>(</span><span class=s1>&#39;lambda&#39;</span><span class=p>),</span>
            <span class=n>handler</span><span class=o>=</span><span class=s1>&#39;hello.handler&#39;</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=n>aws_apigw</span><span class=o>.</span><span class=n>LambdaRestApi</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;Endpoint&#39;</span><span class=p>,</span>
            <span class=n>handler</span><span class=o>=</span><span class=n>my_lambda</span><span class=p>,</span>
        <span class=p>)</span>
</code></pre></div> <p>There are 3 level of Constructs (L1 matches to cloud formation resources, L2 is higher level abstration of AWS resources, while L3 are patterns like APIGateway, or ALB for Fargate). </p> <p>The AWS CDK Toolkit is a command line tool for interacting with CDK apps. Need to be in the folder of the <code>cdk.json</code> file to run it.</p> <div class=highlight><pre><span></span><code>cdk<span class=w> </span>--version
<span class=c1># Get the CloudFormation template</span>
cdk<span class=w> </span>ls
</code></pre></div> <p>The first time we deploy an AWS CDK app into an environment (account/region), we’ll need to install a “bootstrap stack”. </p> <div class=highlight><pre><span></span><code>cdk<span class=w> </span>bootstrap<span class=w> </span>aws://<span class=nv>$ACCOUNT</span>/<span class=nv>$REGION</span><span class=w> </span>-c<span class=w> </span><span class=nv>account</span><span class=o>=</span><span class=nv>$ACCOUNT</span><span class=w> </span>-c<span class=w> </span><span class=nv>environmentType</span><span class=o>=</span>qa<span class=w> </span>--profile<span class=w> </span><span class=nv>$PROFILE</span>
</code></pre></div> <p>This stack includes resources that are needed for the toolkit’s operation. It requires dedicated Amazon S3 buckets to store template and assets.</p> <p><img alt src=../images/cdk-toolkit-cf.png></p> <p>CDK applications should be organized into logical units, such as API, database, and monitoring resources, and optionally have a pipeline for automated deployments.</p> <p>For an application with multiple components/microservices, it is possible to organize different stacks, one per component for example, and then link them with a single app. See example in <a href=https://github.com/jbcodeforce/aws-cdk-project-templates>CDK project template</a> or <a href>Autonomous Car Ride Solution</a></p> <p>When packages begin to be used in multiple applications, move them to their own repository. This way, the packages can be referenced by application build systems that use them, and they can also be updated on cadences independent of the application life cycles.</p> <ul> <li>See <a href=https://cdkworkshop.com/ >CDK workshops</a>.</li> <li>The <a href=https://docs.aws.amazon.com/cdk/api/v2/python/index.html>CDK for Python API</a>.</li> </ul> <h2 id=useful-cdk-commands>Useful CDK commands<a class=headerlink href=#useful-cdk-commands title="Permanent link">&para;</a></h2> <ul> <li><code>cdk ls</code> list all stacks in the app</li> <li><code>cdk synth</code> emits the synthesized CloudFormation template</li> <li><code>cdk deploy</code> deploy this stack to the default AWS account/region</li> <li><code>cdk diff</code> compare deployed stack with current state</li> <li><code>cdk docs</code> open CDK documentation</li> <li><code>cdk watch</code> monitors the code and assets for changes and attempts to perform a deployment automatically when a change is detected</li> <li><code>cdk destroy</code> remove all the resources/stacks. Most resources will get deleted upon stack deletion. CloudWatch logs that are permanently retained</li> </ul> <h2 id=samples>Samples<a class=headerlink href=#samples title="Permanent link">&para;</a></h2> <h3 id=cdk-python-for-an-ec2>CDK Python for an EC2<a class=headerlink href=#cdk-python-for-an-ec2 title="Permanent link">&para;</a></h3> <ul> <li>Summary of the actions to jumpstart a CDK sample app in python</li> </ul> <div class=highlight><pre><span></span><code><span class=c1># Create a python CDK project under a new created folder. The name of the folder defines the name of the app.</span>
<span class=c1># It uses the sample-app template. If template is not specified the stack will have only constructor</span>
cdk<span class=w> </span>init<span class=w> </span>sample-app<span class=w> </span>--language<span class=w> </span>python
<span class=c1># cdk init --language python </span>
<span class=c1># create virtual env</span>
python3<span class=w> </span>-m<span class=w> </span>venv<span class=w> </span>.venv
<span class=c1># Active the virtual env</span>
<span class=nb>source</span><span class=w> </span>.venv/bin/activate
<span class=c1># Install dependencies</span>
pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</code></pre></div> <ul> <li>Then develop the CDK class to define the configuration needed, like in the following code: a simple EC2 instance with code define in user data script to prepare a web server based on nginx:</li> </ul> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>aws_cdk</span> <span class=kn>import</span> <span class=p>(</span>
    <span class=n>Stack</span><span class=p>,</span>
    <span class=n>aws_ec2</span> <span class=k>as</span> <span class=n>ec2</span><span class=p>)</span>

<span class=n>amzn_linux</span> <span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>MachineImage</span><span class=o>.</span><span class=n>latest_amazon_linux</span><span class=p>(</span>
    <span class=n>generation</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>AmazonLinuxGeneration</span><span class=o>.</span><span class=n>AMAZON_LINUX_2</span><span class=p>,</span>
    <span class=n>edition</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>AmazonLinuxEdition</span><span class=o>.</span><span class=n>STANDARD</span><span class=p>,</span>
    <span class=n>virtualization</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>AmazonLinuxVirt</span><span class=o>.</span><span class=n>HVM</span><span class=p>,</span>
    <span class=n>storage</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>AmazonLinuxStorage</span><span class=o>.</span><span class=n>GENERAL_PURPOSE</span>
<span class=p>)</span>
<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;./user_data/user_data.sh&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
    <span class=n>user_data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>

<span class=k>class</span> <span class=nc>Ec2Stack</span><span class=p>(</span><span class=n>Stack</span><span class=p>):</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>instance</span> <span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>Instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;myHttpdEC2&quot;</span><span class=p>,</span>
                                <span class=n>instance_type</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>InstanceType</span><span class=p>(</span><span class=s2>&quot;t2.micro&quot;</span><span class=p>),</span>
                                <span class=n>instance_name</span><span class=o>=</span><span class=s2>&quot;mySimpleHTTPserver&quot;</span><span class=p>,</span>
                                <span class=n>machine_image</span><span class=o>=</span><span class=n>amzn_linux</span><span class=p>,</span>
                                <span class=n>user_data</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>UserData</span><span class=o>.</span><span class=n>custom</span><span class=p>(</span><span class=n>user_data</span><span class=p>),</span>
                                <span class=p>)</span>
</code></pre></div> <p>See more <a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_ec2/Instance.html>information on the EC2 Instance API</a>.</p> <ul> <li>Run the cloud formation template generation and then deploy it to the account / region</li> </ul> <div class=highlight><pre><span></span><code><span class=c1># Synthesize the Cloud Formation template </span>
cdk<span class=w> </span>synth
<span class=c1># The first time bootstrap the stack - which will create a CF CDKToolkit</span>
cdk<span class=w> </span>bootstrap
<span class=c1># or using account and region</span>
cdk<span class=w> </span>bootstrap<span class=w> </span>aws://4....../us-west-2
<span class=c1># Deploy the stack</span>
cdk<span class=w> </span>deploy
<span class=c1># Update the code and do a partial (hotswappable) deployment</span>
cdk<span class=w> </span>deploy<span class=w> </span>--hotswap
<span class=c1># Set name for the context</span>
dk<span class=w> </span>deploy<span class=w>  </span>--context<span class=w> </span><span class=nv>s3bucketname</span><span class=o>=</span>&lt;the<span class=w> </span>name<span class=w> </span>of<span class=w> </span>the<span class=w> </span>s3<span class=w> </span>bucket&gt;<span class=w> </span>--all
</code></pre></div> <ul> <li>Then go to the CloudFormation console and look at the deployed stack, and resources.</li> </ul> <h3 id=some-personal-examples>Some personal examples<a class=headerlink href=#some-personal-examples title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Folder</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/cdk/ec2-vpc>labs/cdk/ec2-basic</a></td> <td>EC2 with http server, and security group for inbound traffic deployed on default VPC</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/cdk/ec2-vpc>labs/cdk/ec2-vpc</a></td> <td>EC2 with VPC and public &amp; private subnets, NAT, IGW, Bastion Host</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/cloud9>labs/cloud9</a> for a cloud9 environment for a specific VPC</td> <td></td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/cdk/cdk_workshop>labs/cdk/cdk_workhop</a></td> <td>Lambda functions in python with an API gateway and TableViewer.</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/cdk/ecs-fargate-flask>lab ECS fargate Flask App</a></td> <td>VPC with ECS fargate for a Flask APP where container is created during deployment</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/eks/eks-cdk/ >lab EKS</a></td> <td>VPC with EKS cluster deployment</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/big-data-tenant-analytics/tree/main/setup/apigw-lambda-cdk>cdk with lambda and API gateway</a></td> <td>Python lambda + API gateway</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/autonomous-car-mgr.git>cdk python for lambda, dynamo, api gtw, powertools (autonomous car manager)</a></td> <td>Python lambda + API gateway, dynamoDB, iam policy, Alias and version</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/lambdas/java-sample/setup>Lambda java cdk</a></td> <td></td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/aws-cdk-project-templates>AWS CDK my project template</a></td> <td>A template project to organize java deployment on ECR with CDK infrastructure.</td> </tr> <tr> <td>AWS <a href=https://github.com/jbcodeforce/aws-resiliency-studies>resiliency studies</a></td> <td>With VPC, ELB, ASG, EC2</td> </tr> <tr> <td><a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/networking/ec2-vpce-s3>ec2-vpce-s3</a> to map the connection <a href=../../infra/networking/#vpc-endpoint-policies>debug use case</a></td> <td>EC2 to VPC gateway endpoint to S3 bucket</td> </tr> </tbody> </table> <h3 id=cdk-blueprint-for-eks><a href=https://aws.github.io/aws-eks-best-practices/ >CDK Blueprint for EKS</a><a class=headerlink href=#cdk-blueprint-for-eks title="Permanent link">&para;</a></h3> <ul> <li><a href=https://aws.amazon.com/blogs/containers/bootstrapping-clusters-with-eks-blueprints/ >Blog introduction EKS blueprint</a></li> <li><a href=https://aws-quickstart.github.io/cdk-eks-blueprints/ >AWS CDK EKS blueprint git repo</a></li> </ul> <h3 id=other-tools-samples>Other tools - samples<a class=headerlink href=#other-tools-samples title="Permanent link">&para;</a></h3> <ul> <li><a href=https://docs.aws.amazon.com/cdk/api/v2/python/ >CDK API v2 for Python</a></li> <li><a href="https://pypi.org/search/?q=aws-cdk">Pypi.org search</a> needed when using alpha or beta libraries.</li> <li><a href=https://cdkpatterns.com/patterns>CDK Patterns</a></li> <li><a href=https://pypi.org/project/cdk-dynamo-table-view/ >cdk-dynamo-table-viewer</a> An AWS CDK construct which exposes a public HTTP endpoint which displays an HTML page with the contents of a DynamoDB table defined in the stack.</li> <li><a href=https://github.com/aws-samples/aws-cdk-examples/tree/master/python>AWS CDK samples in Python</a></li> <li><a href=https://constructs.dev/ >Constructs HUB</a></li> <li><a href=https://github.com/jbcodeforce/python-code/tree/master/aws/dynamoDB>A Flask app for orders management with DynamoDB as persistence - ECR - CDK</a></li> <li><a href=https://github.com/jbcodeforce/big-data-tenant-analytics/tree/main/setup>Big Data SaaS demo</a></li> <li><a href=https://github.com/cdklabs>AWS CDK labs</a></li> </ul> <h2 id=some-how-tos>Some how-tos<a class=headerlink href=#some-how-tos title="Permanent link">&para;</a></h2> <details class=-> <summary>Create a role for an EC2 instance to access S3</summary> <div class=highlight><pre><span></span><code><span class=n>role</span> <span class=o>=</span> <span class=n>iam</span><span class=o>.</span><span class=n>Role</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;Role&quot;</span><span class=p>,</span>
            <span class=n>assumed_by</span><span class=o>=</span><span class=n>iam</span><span class=o>.</span><span class=n>ServicePrincipal</span><span class=p>(</span><span class=s2>&quot;ec2.amazonaws.com&quot;</span><span class=p>))</span>
    <span class=n>role</span><span class=o>.</span><span class=n>add_managed_policy</span><span class=p>(</span><span class=n>iam</span><span class=o>.</span><span class=n>ManagedPolicy</span><span class=o>.</span><span class=n>from_aws_managed_policy_name</span><span class=p>(</span><span class=s2>&quot;AmazonS3FullAccess&quot;</span><span class=p>))</span>
</code></pre></div> </details> <details class=-> <summary>Create EC2 in public subnet</summary> <p>With an instance profile role, defined from a previous declaration: <div class=highlight><pre><span></span><code><span class=bp>self</span><span class=o>.</span><span class=n>instance</span> <span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>Instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;myHttpdEC2&quot;</span><span class=p>,</span>
                            <span class=n>instance_type</span><span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>InstanceType</span><span class=p>(</span><span class=s2>&quot;t2.micro&quot;</span><span class=p>),</span>
                            <span class=n>instance_name</span><span class=o>=</span><span class=s2>&quot;mySimpleHTTPserver&quot;</span><span class=p>,</span>
                            <span class=n>machine_image</span><span class=o>=</span><span class=n>amzn_linux</span><span class=p>,</span>
                            <span class=n>vpc</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>vpc</span><span class=p>,</span>
                            <span class=n>role</span><span class=o>=</span><span class=n>role</span><span class=p>,</span>
                            <span class=n>key_name</span><span class=o>=</span><span class=n>key_name</span><span class=p>,</span>
                            <span class=n>vpc_subnets</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>SubnetSelection</span><span class=p>(</span><span class=n>subnet_type</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>SubnetType</span><span class=o>.</span><span class=n>PUBLIC</span><span class=p>),</span>
                            <span class=n>security_group</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>ec2_security_group</span><span class=p>,</span>
                            <span class=n>user_data</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>UserData</span><span class=o>.</span><span class=n>custom</span><span class=p>(</span><span class=n>user_data</span><span class=p>),</span>
                            <span class=p>)</span>
</code></pre></div></p> </details> <details class=-> <summary>Declare RDS postgresql with secrets</summary> <p>The following python CDK code declares a Postgresql DB in a private subnet within a VPC created before. The access is public. CDK will create a secret in AWS Secret manager.</p> <div class=highlight><pre><span></span><code> <span class=bp>self</span><span class=o>.</span><span class=n>postgres</span> <span class=o>=</span> <span class=n>aws_rds</span><span class=o>.</span><span class=n>DatabaseInstance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;PostgresqlInstance&quot;</span><span class=p>,</span>
                            <span class=n>database_name</span><span class=o>=</span><span class=s2>&quot;tenantdb&quot;</span><span class=p>,</span>
                            <span class=n>engine</span><span class=o>=</span><span class=n>aws_rds</span><span class=o>.</span><span class=n>DatabaseInstanceEngine</span><span class=o>.</span><span class=n>postgres</span><span class=p>(</span><span class=n>version</span><span class=o>=</span><span class=n>aws_rds</span><span class=o>.</span><span class=n>PostgresEngineVersion</span><span class=o>.</span><span class=n>VER_14_5</span><span class=p>),</span>
                            <span class=n>vpc_subnets</span><span class=o>=</span><span class=n>aws_ec2</span><span class=o>.</span><span class=n>SubnetSelection</span><span class=p>(</span><span class=n>subnet_type</span><span class=o>=</span><span class=n>aws_ec2</span><span class=o>.</span><span class=n>SubnetType</span><span class=o>.</span><span class=n>PRIVATE_WITH_EGRESS</span><span class=p>),</span>
                            <span class=n>vpc</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>vpc</span><span class=p>,</span>
                            <span class=n>port</span><span class=o>=</span><span class=mi>5432</span><span class=p>,</span>
                            <span class=n>removal_policy</span><span class=o>=</span><span class=n>RemovalPolicy</span><span class=o>.</span><span class=n>DESTROY</span><span class=p>,</span>
                            <span class=n>deletion_protection</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
                            <span class=n>max_allocated_storage</span><span class=o>=</span><span class=mi>200</span><span class=p>,</span>
                            <span class=n>publicly_accessible</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>
</code></pre></div> </details> <details class=-> <summary>Create a user with a policy</summary> <p><a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_iam/CfnUser.html>Python user class</a>. Use password so user can access console and use API. </p> <div class=highlight><pre><span></span><code>    <span class=n>user</span> <span class=o>=</span> <span class=n>iam</span><span class=o>.</span><span class=n>User</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
                    <span class=s2>&quot;ecruser&quot;</span><span class=p>,</span>
                    <span class=n>user_name</span><span class=o>=</span><span class=s2>&quot;ecruser&quot;</span><span class=p>,</span>
                    <span class=n>password</span><span class=o>=</span><span class=n>SecretValue</span><span class=o>.</span><span class=n>unsafe_plain_text</span><span class=p>(</span><span class=s2>&quot;T0ch@ngefordemo&quot;</span><span class=p>)</span>
                    <span class=p>)</span>
    <span class=n>user</span><span class=o>.</span><span class=n>attach_inline_policy</span><span class=p>(</span><span class=n>policy</span><span class=p>)</span>
    <span class=c1># or </span>
    <span class=n>user</span><span class=o>.</span><span class=n>add_managed_policy</span><span class=p>(</span><span class=n>policy</span><span class=p>)</span>
</code></pre></div> <p>See <a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/security/iam/abac>this cdk for the abac tutorials</a></p> </details> <details class=-> <summary>Create IAM policy</summary> <p>See <a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_iam/Policy.html>Policy class</a>. Force to true to get the policy being created as managed policy.</p> <div class=highlight><pre><span></span><code><span class=n>policy</span> <span class=o>=</span> <span class=n>iam</span><span class=o>.</span><span class=n>Policy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=s2>&quot;ecr-auth-token-policy&quot;</span><span class=p>,</span>
            <span class=n>statements</span><span class=o>=</span> <span class=p>[</span>
                <span class=n>iam</span><span class=o>.</span><span class=n>PolicyStatement</span><span class=p>(</span>
                    <span class=n>actions</span><span class=o>=</span> <span class=p>[</span><span class=s2>&quot;ecr:GetAuthorizationToken&quot;</span><span class=p>],</span>
                    <span class=n>resources</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;*&quot;</span><span class=p>],</span>
                    <span class=n>conditions</span><span class=o>=</span><span class=p>[{}],</span>
                <span class=p>)],</span>
            <span class=n>policy_name</span><span class=o>=</span><span class=s2>&quot;ecr-auth-token-policy&quot;</span><span class=p>,</span>
            <span class=n>force</span><span class=o>=</span> <span class=kc>True</span>   
    <span class=p>)</span>
</code></pre></div> </details> <details class=-> <summary>Get existing VPC reference</summary> <div class=highlight><pre><span></span><code>    <span class=c1># Retrieve default VPC information</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>vpc</span> <span class=o>=</span> <span class=n>aws_ec2</span><span class=o>.</span><span class=n>Vpc</span><span class=o>.</span><span class=n>from_lookup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;VPC&quot;</span><span class=p>,</span>
        <span class=n>is_default</span><span class=o>=</span><span class=kc>True</span>
    <span class=p>)</span>
</code></pre></div> <p>For other VPC change is_default to False and provide the vpcName. <div class=highlight><pre><span></span><code><span class=c1># get the vpc-id from parameter store</span>
<span class=n>vpc_id</span> <span class=o>=</span> <span class=n>ssm</span><span class=o>.</span><span class=n>StringParameter</span><span class=o>.</span><span class=n>value_from_lookup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;/vpc-id&quot;</span><span class=p>)</span>

<span class=c1># get the Vpc from the id</span>
<span class=n>vpc</span> <span class=o>=</span> <span class=n>ec2</span><span class=o>.</span><span class=n>Vpc</span><span class=o>.</span><span class=n>from_lookup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;vpc&quot;</span><span class=p>,</span> <span class=n>vpc_id</span><span class=o>=</span><span class=n>vpc_id</span><span class=p>)</span>

<span class=c1># get the subnets in AZ a from the vpc</span>
<span class=n>subnets_in_az_a</span> <span class=o>=</span> <span class=n>vpc</span><span class=o>.</span><span class=n>select_subnets</span><span class=p>(</span><span class=n>availability_zones</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;ap-southeast-2a&quot;</span><span class=p>])</span>

<span class=c1># create AZ lookup</span>
<span class=n>az_lookup</span> <span class=o>=</span> <span class=p>{}</span>

<span class=c1># iterate over the AZ a subnets </span>
<span class=k>for</span> <span class=n>subnet</span> <span class=ow>in</span> <span class=n>subnets_in_az_a</span><span class=o>.</span><span class=n>subnets</span><span class=p>:</span>
    <span class=n>az_lookup</span><span class=p>[</span><span class=n>subnet</span><span class=o>.</span><span class=n>subnet_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>subnet</span><span class=o>.</span><span class=n>availability_zone</span>

<span class=c1># iterate over the public subnets </span>
<span class=k>for</span> <span class=n>subnet</span> <span class=ow>in</span> <span class=n>vpc</span><span class=o>.</span><span class=n>public_subnets</span><span class=p>:</span> 
    <span class=n>az_lookup</span><span class=p>[</span><span class=n>subnet</span><span class=o>.</span><span class=n>subnet_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>subnet</span><span class=o>.</span><span class=n>availability_zone</span>

<span class=c1># fetch the isolated subnets list from parameter store</span>
<span class=n>iso_subnet_ids</span> <span class=o>=</span> <span class=n>ssm</span><span class=o>.</span><span class=n>StringParameter</span><span class=o>.</span><span class=n>value_from_lookup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;/iso-subnets&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;,&quot;</span><span class=p>)</span>

<span class=c1>#create an list to store the subnets in</span>
<span class=n>iso_subnets</span> <span class=o>=</span> <span class=p>[]</span>

<span class=c1># iterate over the subnet ids and create the full Subnet object includeing AZ</span>
<span class=n>iso_count</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>for</span> <span class=n>subnet_id</span> <span class=ow>in</span> <span class=n>iso_subnet_ids</span><span class=p>:</span>
    <span class=n>iso_subnets</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
        <span class=n>ec2</span><span class=o>.</span><span class=n>Subnet</span><span class=o>.</span><span class=n>from_subnet_attributes</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=s2>&quot;IsoSub&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>iso_count</span><span class=p>),</span>
            <span class=n>subnet_id</span><span class=o>=</span><span class=n>subnet_id</span><span class=p>,</span>
            <span class=n>availability_zone</span><span class=o>=</span><span class=n>az_lookup</span><span class=p>[</span><span class=n>subnet_id</span><span class=p>],</span>
        <span class=p>)</span>
    <span class=p>)</span>
    <span class=n>iso_count</span> <span class=o>+=</span> <span class=mi>1</span>
</code></pre></div></p> <p>We can also use boto3 and then get VPC by name: <div class=highlight><pre><span></span><code><span class=n>client</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span><span class=s1>&#39;ec2&#39;</span><span class=p>,</span><span class=n>region_name</span><span class=o>=</span><span class=s1>&#39;us-east-1&#39;</span><span class=p>)</span>
    <span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>describe_vpcs</span><span class=p>(</span>
                    <span class=n>Filters</span><span class=o>=</span><span class=p>[{</span>
                        <span class=s1>&#39;Name&#39;</span><span class=p>:</span> <span class=s1>&#39;tag:Name&#39;</span><span class=p>,</span>
                        <span class=s1>&#39;Values&#39;</span><span class=p>:</span> <span class=p>[</span>
                            <span class=n>vpc_name</span>
                        <span class=p>]</span>
                    <span class=p>}]</span>
                <span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>response</span><span class=p>[</span><span class=s1>&#39;Vpcs&#39;</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
        <span class=n>vpc</span><span class=o>=</span><span class=n>response</span><span class=p>[</span><span class=s1>&#39;Vpcs&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>vpc</span><span class=o>=</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=n>vpc</span>
</code></pre></div></p> </details> <details class=-> <summary>Inject Database URL and admin password as env variable</summary> <p>First there is those <a href=https://pypi.org/project/aws-cdk.aws-rds/ >excellent PyPI examples for RDS instance</a> creation. Then when using TaskImageOptions from the ecs_patterns library there is an <code>environment</code> element. <div class=highlight><pre><span></span><code><span class=n>task_image_options</span><span class=o>=</span><span class=n>aws_ecs_patterns</span><span class=o>.</span><span class=n>ApplicationLoadBalancedTaskImageOptions</span><span class=p>(</span>
            <span class=n>image</span><span class=o>=</span><span class=n>ecs</span><span class=o>.</span><span class=n>ContainerImage</span><span class=o>.</span><span class=n>from_registry</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>account</span><span class=p>)</span> 
                                                <span class=o>+</span> <span class=s2>&quot;.dkr.ecr.&quot;</span>
                                                <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>region</span><span class=p>)</span>
                                                <span class=o>+</span> <span class=s2>&quot;.amazonaws.com/acr-car-ride-mgr&quot;</span><span class=p>),</span>
            <span class=n>environment</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;QUARKUS_DATASOURCES_JDBC_URL&quot;</span> <span class=p>:</span> <span class=s2>&quot;jdbc:postgresql://&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>dbCarRides</span><span class=o>.</span><span class=n>db_instance_endpoint_address</span><span class=p>),</span>

            <span class=p>},</span>
            <span class=n>task_role</span> <span class=o>=</span> <span class=n>taskRole</span>
        <span class=p>)</span>
</code></pre></div> The database <code>Credentials.from_generated_secret</code> function creates a <code>Secret</code> in <code>SecretManager</code>, with the name <code>rds-secret</code>: <div class=highlight><pre><span></span><code>     <span class=n>credentials</span><span class=o>=</span><span class=n>rds</span><span class=o>.</span><span class=n>Credentials</span><span class=o>.</span><span class=n>from_generated_secret</span><span class=p>(</span><span class=s2>&quot;postgres&quot;</span><span class=p>,</span><span class=n>secret_name</span><span class=o>=</span><span class=s2>&quot;rds-secret&quot;</span><span class=p>),</span>                                     
</code></pre></div></p> </details> <details class=-> <summary>Unit <a href=https://docs.aws.amazon.com/cdk/v2/guide/testing.html>testing a stack</a></summary> <p>Uses the AWS CDK's <a href=https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.assertions-readme.html>assertions</a> module, to validate "this resource has this property with this value." <div class=highlight><pre><span></span><code>python<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements-dev.txt
python<span class=w> </span>-m<span class=w> </span>pytest
</code></pre></div></p> </details> <details class=-> <summary>Another example of passing a shell script as EC2 user data</summary> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;./VPCstack/user_data.sh&quot;</span><span class=p>,</span> <span class=s2>&quot;rb&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
<span class=n>userData</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>UserData</span><span class=o>.</span><span class=n>for_linux</span><span class=p>()</span>
<span class=n>userData</span><span class=o>.</span><span class=n>add_commands</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</code></pre></div> <p><a href=https://github.com/jbcodeforce/MSK-labs/blob/main/infrastructure/VPCstack/vpc_stack.py>See VPC stack and bastion host.</a></p> </details> <details class=-> <summary>Create a lambda (env variable) with an API gateway</summary> <p>Create a folder, <code>api/runtime</code>, to include the python code for the lambda: <code>get_image.py</code>, function <code>lambda_handler</code>: <div class=highlight><pre><span></span><code><span class=c1># import</span>
    <span class=n>aws_lambda</span> <span class=k>as</span> <span class=n>lambda_</span><span class=p>,</span>
    <span class=n>aws_apigateway</span> <span class=k>as</span> <span class=n>apigw</span><span class=p>,</span>

<span class=n>myLambda</span> <span class=o>=</span> <span class=n>lambda_</span><span class=o>.</span><span class=n>Function</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span>
                <span class=s2>&quot;GetImageFunction&quot;</span><span class=p>,</span>
                <span class=n>runtime</span><span class=o>=</span> <span class=n>lambda_</span><span class=o>.</span><span class=n>Runtime</span><span class=o>.</span><span class=n>PYTHON_3_10</span><span class=p>,</span>
                <span class=n>code</span><span class=o>=</span><span class=n>lambda_</span><span class=o>.</span><span class=n>Code</span><span class=o>.</span><span class=n>from_asset</span><span class=p>(</span><span class=s1>&#39;api/runtime&#39;</span><span class=p>),</span>
                <span class=n>handler</span><span class=o>=</span><span class=s1>&#39;get_image.lambda_handler&#39;</span><span class=p>,</span>
                <span class=n>environment</span><span class=o>=</span><span class=p>{</span>
                    <span class=s1>&#39;BUCKET_NAME&#39;</span><span class=p>:</span> <span class=n>s3Bucket</span><span class=o>.</span><span class=n>bucket_name</span><span class=p>,</span>
                <span class=p>})</span>
</code></pre></div></p> <p>Add API Gateway with a POST:</p> <p><div class=highlight><pre><span></span><code><span class=n>apiGtw</span> <span class=o>=</span> <span class=n>apigw</span><span class=o>.</span><span class=n>RestApi</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;CWdemoApi&quot;</span><span class=p>,</span>
                        <span class=n>rest_api_name</span><span class=o>=</span><span class=s2>&quot;CWDemoApi&quot;</span><span class=p>,</span>
                       <span class=p>)</span>
<span class=n>images</span> <span class=o>=</span> <span class=n>apiGtw</span><span class=o>.</span><span class=n>root</span><span class=o>.</span><span class=n>add_resource</span><span class=p>(</span><span class=s1>&#39;images&#39;</span><span class=p>)</span>
<span class=n>images</span><span class=o>.</span><span class=n>add_method</span><span class=p>(</span><span class=s1>&#39;POST&#39;</span><span class=p>,</span>  <span class=n>apigw</span><span class=o>.</span><span class=n>LambdaIntegration</span><span class=p>(</span><span class=n>getImageFct</span><span class=p>))</span>
</code></pre></div> See <a href=https://github.com/jbcodeforce/yarfba/tree/main/labs/code-whisperer-demo>code whisperer demo</a></p> </details> <details class=-> <summary>Create a bastion from a custom AMI (Java 17, maven, docker)</summary> <p>See the VPCstack definition in <a href=https://github.com/jbcodeforce/aws-cdk-project-templates/blob/main/VPCstack/vpc_stack.py>aws-cdk-project template</a>. Attention bastion does not have role</p> </details> <details class=-> <summary>Access env account from stack</summary> <div class=highlight><pre><span></span><code><span class=bp>self</span><span class=o>.</span><span class=n>account</span>
<span class=bp>self</span><span class=o>.</span><span class=n>region</span>
</code></pre></div> </details> <details class=-> <summary>Add VPCFlow to a VPC</summary> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>aws_cdk</span> <span class=kn>import</span> <span class=n>aws_logs</span> <span class=k>as</span> <span class=n>logs</span>

<span class=n>cwLogs</span> <span class=o>=</span> <span class=n>logs</span><span class=o>.</span><span class=n>LogGroup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;/aws/vpc/flowlogs&#39;</span><span class=p>)</span>
<span class=bp>self</span><span class=o>.</span><span class=n>vpc</span><span class=o>.</span><span class=n>add_flow_log</span><span class=p>(</span><span class=s2>&quot;flowlogs&quot;</span><span class=p>,</span><span class=n>destination</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>FlowLogDestination</span><span class=o>.</span><span class=n>to_cloud_watch_logs</span><span class=p>(</span><span class=n>cwLogs</span><span class=p>),</span>
                          <span class=n>traftraffic_type</span><span class=o>=</span><span class=n>ec2</span><span class=o>.</span><span class=n>FlowLogTrafficType</span><span class=o>.</span><span class=n>ALL</span><span class=p>)</span>
</code></pre></div> </details> <details class=-> <summary>Passing context variables</summary> <p>The call to deploy pass the information to the context:</p> <div class=highlight><pre><span></span><code>dk<span class=w> </span>deploy<span class=w>  </span>--context<span class=w> </span><span class=nv>s3bucketname</span><span class=o>=</span>&lt;the<span class=w> </span>name<span class=w> </span>of<span class=w> </span>the<span class=w> </span>s3<span class=w> </span>bucket&gt;<span class=w> </span>--all
</code></pre></div> <p>And in the stack definition:</p> <div class=highlight><pre><span></span><code><span class=n>s3_bucket_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>node</span><span class=o>.</span><span class=n>try_get_context</span><span class=p>(</span><span class=s2>&quot;s3bucketname&quot;</span><span class=p>)</span>
</code></pre></div> </details> <details class=question> <summary>Install python dependencies while deploying Lambda</summary> <p>To install Python packages when deploying a Lambda function using the CDK, you can use the Code.fromAsset() option and specify a bundling command that runs pip install.</p> <div class=highlight><pre><span></span><code><span class=n>acm_lambda</span> <span class=o>=</span> <span class=n>aws_lambda</span><span class=o>.</span><span class=n>Function</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>&#39;CarMgrService&#39;</span><span class=p>,</span>
        <span class=n>runtime</span><span class=o>=</span><span class=n>aws_lambda</span><span class=o>.</span><span class=n>Runtime</span><span class=o>.</span><span class=n>PYTHON_3_11</span><span class=p>,</span>
        <span class=n>code</span><span class=o>=</span> <span class=n>aws_lambda</span><span class=o>.</span><span class=n>Code</span><span class=o>.</span><span class=n>from_asset</span><span class=p>(</span><span class=n>path</span><span class=o>=</span><span class=s2>&quot;../src/carmgr&quot;</span><span class=p>,</span>
                    <span class=n>bundling</span><span class=o>=</span><span class=n>BundlingOptions</span><span class=p>(</span>
                        <span class=n>image</span><span class=o>=</span> <span class=n>aws_lambda</span><span class=o>.</span><span class=n>Runtime</span><span class=o>.</span><span class=n>PYTHON_3_11</span><span class=o>.</span><span class=n>bundling_image</span><span class=p>,</span>
                        <span class=n>command</span><span class=o>=</span> <span class=p>[</span>
                            <span class=s1>&#39;bash&#39;</span><span class=p>,</span><span class=s1>&#39;-c&#39;</span><span class=p>,</span><span class=s1>&#39;pip install -r requirements.txt -t /asset-output &amp;&amp; cp -au . /asset-output&#39;</span>
                        <span class=p>],</span>
                <span class=p>)),</span>
</code></pre></div> </details> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../cloudFormation/ class="md-footer__link md-footer__link--prev" aria-label="Previous: CloudFormation"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> CloudFormation </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> </body> </html>