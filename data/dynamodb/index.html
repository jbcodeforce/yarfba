<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jerome Boyer"><link href=../rds/ rel=prev><link href=../data-lake/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>DynamoDB - AWS Studies</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#dynamodb class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="AWS Studies" class="md-header__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> AWS Studies </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> DynamoDB </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="AWS Studies" class="md-nav__button md-logo" aria-label="AWS Studies" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> AWS Studies </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/yarfba.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Infrastructure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../infra/ class=md-nav__link> <span class=md-ellipsis> EC2-others </span> </a> </li> <li class=md-nav__item> <a href=../../infra/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../infra/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../infra/storage/ class=md-nav__link> <span class=md-ellipsis> S3-Storage </span> </a> </li> <li class=md-nav__item> <a href=../../infra/route53/ class=md-nav__link> <span class=md-ellipsis> Route 53 </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/monitoring/ class=md-nav__link> <span class=md-ellipsis> Monitoring </span> </a> </li> <li class=md-nav__item> <a href=../../monitoring/cost/ class=md-nav__link> <span class=md-ellipsis> Cost mgt </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sa/well-architectured/ class=md-nav__link> <span class=md-ellipsis> Well Architectured </span> </a> </li> <li class=md-nav__item> <a href=../../sa/sol-design/ class=md-nav__link> <span class=md-ellipsis> Solution design </span> </a> </li> <li class=md-nav__item> <a href=../../sa/psa-role/ class=md-nav__link> <span class=md-ellipsis> SA </span> </a> </li> <li class=md-nav__item> <a href=../../sa/saas/ class=md-nav__link> <span class=md-ellipsis> SaaS </span> </a> </li> <li class=md-nav__item> <a href=../../sa/resiliency/ class=md-nav__link> <span class=md-ellipsis> Resiliency </span> </a> </li> <li class=md-nav__item> <a href=../../templ/ class=md-nav__link> <span class=md-ellipsis> Conduct Design session </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Analytics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Analytics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../analytics/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../analytics/emr/ class=md-nav__link> <span class=md-ellipsis> EMR </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../rds/ class=md-nav__link> <span class=md-ellipsis> RDS-Aurora </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> DynamoDB </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> DynamoDB </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#scoping-considerations class=md-nav__link> <span class=md-ellipsis> Scoping considerations </span> </a> </li> <li class=md-nav__item> <a href=#quotas-limit-pricing class=md-nav__link> <span class=md-ellipsis> Quotas / Limit / Pricing </span> </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> <span class=md-ellipsis> Coding </span> </a> <nav class=md-nav aria-label=Coding> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sdk class=md-nav__link> <span class=md-ellipsis> SDK </span> </a> </li> <li class=md-nav__item> <a href=#cdk class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> <li class=md-nav__item> <a href=#partisql class=md-nav__link> <span class=md-ellipsis> PartiSQL </span> </a> </li> <li class=md-nav__item> <a href=#other-coding-pattern class=md-nav__link> <span class=md-ellipsis> Other coding pattern </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dynamodb-accelerator-dax class=md-nav__link> <span class=md-ellipsis> DynamoDB Accelerator - DAX </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-stream-processing class=md-nav__link> <span class=md-ellipsis> DynamoDB Stream processing </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-global-table class=md-nav__link> <span class=md-ellipsis> DynamoDB global table </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-time-to-live class=md-nav__link> <span class=md-ellipsis> DynamoDB Time to live </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../data-lake/ class=md-nav__link> <span class=md-ellipsis> Data Lake </span> </a> </li> <li class=md-nav__item> <a href=../redshift/ class=md-nav__link> <span class=md-ellipsis> RedShift </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> AI-ML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> AI-ML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ai-ml/ class=md-nav__link> <span class=md-ellipsis> All Services </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/sagemaker/ class=md-nav__link> <span class=md-ellipsis> SageMaker </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/bedrock/ class=md-nav__link> <span class=md-ellipsis> Bedrock </span> </a> </li> <li class=md-nav__item> <a href=../../ai-ml/q/ class=md-nav__link> <span class=md-ellipsis> Amazon Q </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Serverless </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Serverless </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serverless/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/lambda/ class=md-nav__link> <span class=md-ellipsis> Lambda </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/apigtw/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eks/ class=md-nav__link> <span class=md-ellipsis> EKS </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> Messaging </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/msk/ class=md-nav__link> <span class=md-ellipsis> MSK </span> </a> </li> <li class=md-nav__item> <a href=../../kinesis/ class=md-nav__link> <span class=md-ellipsis> Kinesis* </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/eventbridge/ class=md-nav__link> <span class=md-ellipsis> EventBridge </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/stepfct/ class=md-nav__link> <span class=md-ellipsis> Step function </span> </a> </li> <li class=md-nav__item> <a href=../../serverless/mwaa/ class=md-nav__link> <span class=md-ellipsis> MWAA </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Playground </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Playground </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../playground/ class=md-nav__link> <span class=md-ellipsis> AWS personal labs </span> </a> </li> <li class=md-nav__item> <a href=../../playground/gettingstarted/ class=md-nav__link> <span class=md-ellipsis> Getting Started EC2 </span> </a> </li> <li class=md-nav__item> <a href=../../playground/security/ class=md-nav__link> <span class=md-ellipsis> Security-IAM demos </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-play/ class=md-nav__link> <span class=md-ellipsis> S3 play </span> </a> </li> <li class=md-nav__item> <a href=../../playground/networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rds/ class=md-nav__link> <span class=md-ellipsis> RDS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/rt-data-processing/ class=md-nav__link> <span class=md-ellipsis> Data processing </span> </a> </li> <li class=md-nav__item> <a href=../../playground/spark-emr/ class=md-nav__link> <span class=md-ellipsis> Analytics on EMR </span> </a> </li> <li class=md-nav__item> <a href=../../playground/ecs/ class=md-nav__link> <span class=md-ellipsis> ECS </span> </a> </li> <li class=md-nav__item> <a href=../../playground/s3-org-billing/ class=md-nav__link> <span class=md-ellipsis> S3 storage lens </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/big-data-tenant-analytics/ class=md-nav__link> <span class=md-ellipsis> SaaS demo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/ class=md-nav__link> <span class=md-ellipsis> Practices </span> </a> </li> <li class=md-nav__item> <a href=../../coding/sam/ class=md-nav__link> <span class=md-ellipsis> SAM </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cloudFormation/ class=md-nav__link> <span class=md-ellipsis> CloudFormation </span> </a> </li> <li class=md-nav__item> <a href=../../coding/cdk/ class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io class=md-nav__link> <span class=md-ellipsis> Return to main </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#scoping-considerations class=md-nav__link> <span class=md-ellipsis> Scoping considerations </span> </a> </li> <li class=md-nav__item> <a href=#quotas-limit-pricing class=md-nav__link> <span class=md-ellipsis> Quotas / Limit / Pricing </span> </a> </li> <li class=md-nav__item> <a href=#security class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> <span class=md-ellipsis> Coding </span> </a> <nav class=md-nav aria-label=Coding> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sdk class=md-nav__link> <span class=md-ellipsis> SDK </span> </a> </li> <li class=md-nav__item> <a href=#cdk class=md-nav__link> <span class=md-ellipsis> CDK </span> </a> </li> <li class=md-nav__item> <a href=#partisql class=md-nav__link> <span class=md-ellipsis> PartiSQL </span> </a> </li> <li class=md-nav__item> <a href=#other-coding-pattern class=md-nav__link> <span class=md-ellipsis> Other coding pattern </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dynamodb-accelerator-dax class=md-nav__link> <span class=md-ellipsis> DynamoDB Accelerator - DAX </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-stream-processing class=md-nav__link> <span class=md-ellipsis> DynamoDB Stream processing </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-global-table class=md-nav__link> <span class=md-ellipsis> DynamoDB global table </span> </a> </li> <li class=md-nav__item> <a href=#dynamodb-time-to-live class=md-nav__link> <span class=md-ellipsis> DynamoDB Time to live </span> </a> </li> <li class=md-nav__item> <a href=#backup class=md-nav__link> <span class=md-ellipsis> Backup </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=dynamodb><a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html>DynamoDB</a><a class=headerlink href=#dynamodb title="Permanent link">&para;</a></h1> <p>AWS proprietary NoSQL database, Serverless, provisioned capacity, auto scaling, on demand capacity. Fully managed, Highly Available with replication across multiple AZs in one AWS Region by default, Read and Writes are decoupled, and DAX can be used for delivering a read cache. </p> <p>Single digit ms latency, even with increased number of requests. Can support millions of requests per second, trillions of row, 100s of TB storage. Data is stored on solid-state disks (SSDs) and may be encrypted at rest.</p> <p>It is integrated with IAM for authentication and authorization.</p> <p>A <code>table</code> is a collection of <code>items</code>, and each item is a collection of <code>attributes</code>. DynamoDB uses primary keys to uniquely identify each item in a table and secondary indexes to provide more querying flexibility. Useful when the solution does not want to design a data schema upfront and which may change overtime. </p> <p>The maximum size for one item (or record) in a table is 400k.</p> <p>The read operations can be eventually consistent or strongly consistent.</p> <p>There is two capacities modes: </p> <ul> <li><strong>provisioned</strong>: where you specify and pay for read capacity units and write capacity units. Need to plan beforehand. Less expensive. Used when we know the traffic pattern.</li> <li><strong>on-demand</strong>: read and writes automatically scale up/down with your workloads. Better for unpredictable workloads. More expensive.</li> </ul> <p>Indexing is done using the primary key, but we can define secondary indexes which are a group of attributes to be used in queries. Global secondary index can span all of the data in the base table, across all partitions. It is stored in its own partition space away from the base table and scales separately from the base table.</p> <h2 id=scoping-considerations>Scoping considerations<a class=headerlink href=#scoping-considerations title="Permanent link">&para;</a></h2> <ul> <li>Does the data model fit, key-value approach? what wil lbe the primary key?</li> <li>Do you need to support complex queries or just get by the primary key?</li> <li>Do you need global access patterns or data distribution across regions?</li> <li>Review the performance needs for read and write per second. Can operations be split between regions?</li> <li>How large will individual items be? How many items over time? Should items be deleted?</li> <li>What write/read consistency do you require? </li> </ul> <h2 id=quotas-limit-pricing>Quotas / Limit / Pricing<a class=headerlink href=#quotas-limit-pricing title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ServiceQuotas.html>Service, account, and table quotas in Amazon DynamoDB</a>.</li> <li><a href=https://aws.amazon.com/dynamodb/pricing/ >Pricing</a></li> </ul> <h2 id=security>Security<a class=headerlink href=#security title="Permanent link">&para;</a></h2> <p>DynamoDB defined a set of AWS managed policies that defined access policies on DynamoDB features, like replications, Read-write or read-only access.</p> <p>DynamoDB supports resource-based policies for tables, indexes, and streams.</p> <p>All user data stored is fully encrypted at rest, using symmetric keys in KMS (AWS owned (by default), AWS managed key, or customer managed key). It uses 256-bit Advanced Encryption Standard (AES-256). This includes primary key, local and global secondary indexes, streams, global tables, backups, and DynamoDB Accelerator (DAX) clusters. Developer cannot encrypt only a subset of items in a table: all table data is encrypted.</p> <p>DynamoDB uses envelope encryption and key hierarchy to encrypt data. Your AWS KMS encryption key is used to encrypt the root key of this key hierarchy. Developer can use AWS CloudTrail and Amazon CloudWatch Logs to track the requests that DynamoDB sends to AWS KMS.</p> <p>When client app access an encrypted table, DynamoDB decrypts the table data transparently. Call to KMS is not done at each table operation. The key is refreshed once every 5 minutes per caller with active traffic. Be sure to reuse connection with the SDK code. </p> <p>Developer can change the KMS key for a table at any time, either in the DynamoDB console or by using the <code>UpdateTable</code> operation.</p> <p>All the data in DynamoDB is encrypted in transit. By default, communications to and from DynamoDB use the HTTPS protocol. Data in the application, needs to be encrypted before sending it to Dynamodb using client side encryption. If you store sensitive or confidential data in DynamoDB, consider including client-side encryption in your security plan. <a href=https://docs.aws.amazon.com/database-encryption-sdk/latest/devguide/what-is-database-encryption-sdk.html>See the What is the AWS Database Encryption SDK product documentation.</a></p> <p>Below is an example of approach using a KMS AWS managed key, knowing its arn in KMS:</p> <div class=highlight><pre><span></span><code><span class=n>kms</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span><span class=s1>&#39;kms&#39;</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>encrypt</span><span class=p>(</span><span class=n>text_to_encrypt</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>kms</span><span class=o>.</span><span class=n>encrypt</span><span class=p>(</span>
        <span class=n>KeyId</span><span class=o>=</span><span class=n>key_arn</span><span class=p>,</span> 
        <span class=n>Plaintext</span><span class=o>=</span><span class=n>text_to_encrypt</span>
    <span class=p>)[</span><span class=s1>&#39;CiphertextBlob&#39;</span><span class=p>]</span>

<span class=n>item</span><span class=p>[</span><span class=s1>&#39;ssn&#39;</span><span class=p>]</span><span class=o>=</span> <span class=n>encrypt</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=s1>&#39;ssn&#39;</span><span class=p>])</span> 
<span class=n>dynamodb</span><span class=o>.</span><span class=n>put_item</span><span class=p>(</span>
  <span class=n>TableName</span><span class=o>=</span><span class=s1>&#39;MyTable&#39;</span><span class=p>,</span>
  <span class=n>Item</span><span class=o>=</span><span class=n>item</span>
<span class=p>)</span>
</code></pre></div> <p>Attention, with customer managed keys, deletion of the key, will make the tables not accessible. You cannot use a customer managed key with DynamoDB Accelerator (DAX) clusters.</p> <p>See also this <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/encryption.usagenotes.html>important usage note</a>.</p> <h2 id=coding>Coding<a class=headerlink href=#coding title="Permanent link">&para;</a></h2> <p>With the aws CLI:</p> <div class=highlight><pre><span></span><code>aws<span class=w> </span>dynamodb<span class=w> </span>create-table<span class=w> </span>--table-name<span class=w> </span>Orders<span class=w> </span><span class=se>\</span>
<span class=w>                          </span>--attribute-definitions<span class=w> </span><span class=nv>AttributeName</span><span class=o>=</span>orderID,AttributeType<span class=o>=</span>S<span class=w> </span><span class=se>\</span>
<span class=w>                          </span>--key-schema<span class=w> </span><span class=nv>AttributeName</span><span class=o>=</span>orderID,KeyType<span class=o>=</span>HASH<span class=w> </span><span class=se>\</span>
<span class=w>                          </span>--provisioned-throughput<span class=w> </span><span class=nv>ReadCapacityUnits</span><span class=o>=</span><span class=m>1</span>,WriteCapacityUnits<span class=o>=</span><span class=m>1</span>
</code></pre></div> <p>See <a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/CheatSheet.html>AWS dynamodb cli cheat sheet</a></p> <h3 id=sdk>SDK<a class=headerlink href=#sdk title="Permanent link">&para;</a></h3> <p>Create Table with Python SDK:</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>boto3</span>

<span class=c1># Create DynamoDB client</span>
<span class=n>dynamodb</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span><span class=s1>&#39;dynamodb&#39;</span><span class=p>)</span>

<span class=c1># Table attributes</span>
<span class=n>table</span> <span class=o>=</span> <span class=s1>&#39;Products&#39;</span>
<span class=n>key_schema</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span><span class=s1>&#39;AttributeName&#39;</span><span class=p>:</span> <span class=s1>&#39;Id&#39;</span><span class=p>,</span> <span class=s1>&#39;KeyType&#39;</span><span class=p>:</span> <span class=s1>&#39;HASH&#39;</span><span class=p>},</span>
<span class=p>]</span>

<span class=n>attribute_definitions</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>{</span><span class=s1>&#39;AttributeName&#39;</span><span class=p>:</span> <span class=s1>&#39;Id&#39;</span><span class=p>,</span> <span class=s1>&#39;AttributeType&#39;</span><span class=p>:</span> <span class=s1>&#39;N&#39;</span><span class=p>},</span>  
<span class=p>]</span>

<span class=c1># Create the table</span>
<span class=k>try</span><span class=p>:</span>
    <span class=n>response</span> <span class=o>=</span> <span class=n>dynamodb</span><span class=o>.</span><span class=n>create_table</span><span class=p>(</span>                
        <span class=n>TableName</span><span class=o>=</span><span class=n>table</span><span class=p>,</span>
        <span class=n>KeySchema</span><span class=o>=</span><span class=n>key_schema</span><span class=p>,</span>
        <span class=n>AttributeDefinitions</span><span class=o>=</span><span class=n>attribute_definitions</span><span class=p>,</span>
        <span class=n>ProvisionedThroughput</span><span class=o>=</span><span class=p>{</span>
            <span class=s1>&#39;ReadCapacityUnits&#39;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
            <span class=s1>&#39;WriteCapacityUnits&#39;</span><span class=p>:</span> <span class=mi>5</span>
        <span class=p>}</span>
    <span class=p>)</span>
<span class=k>except</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Unable to create table:&quot;</span><span class=p>,</span> <span class=n>table</span><span class=p>)</span>

<span class=k>else</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Created table </span><span class=si>{</span><span class=n>table</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div> <ul> <li>Transactional write with <a href=https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_TransactWriteItems.html>TransactWriteItems API</a></li> </ul> <div class=highlight><pre><span></span><code><span class=n>dynamodb</span> <span class=o>=</span> <span class=n>boto3</span><span class=o>.</span><span class=n>client</span><span class=p>(</span><span class=s1>&#39;dynamodb&#39;</span><span class=p>)</span> 
<span class=c1># prepare data</span>
<span class=n>items</span> <span class=o>=</span> <span class=p>[</span>
  <span class=p>{</span>
    <span class=s1>&#39;Put&#39;</span><span class=p>:</span> <span class=p>{</span>
      <span class=s1>&#39;TableName&#39;</span><span class=p>:</span> <span class=n>table</span><span class=p>,</span>  
      <span class=s1>&#39;Item&#39;</span><span class=p>:</span> <span class=p>{</span>
        <span class=s1>&#39;Id&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;N&#39;</span><span class=p>:</span> <span class=s1>&#39;123&#39;</span><span class=p>},</span> 
        <span class=s1>&#39;Name&#39;</span><span class=p>:</span> <span class=p>{</span><span class=s1>&#39;S&#39;</span><span class=p>:</span> <span class=s1>&#39;Item 1&#39;</span><span class=p>}</span>
      <span class=p>}</span>
    <span class=p>}</span>
  <span class=p>},</span><span class=o>...</span>

<span class=k>try</span><span class=p>:</span>
  <span class=n>response</span> <span class=o>=</span> <span class=n>dynamodb</span><span class=o>.</span><span class=n>transact_write_items</span><span class=p>(</span>
    <span class=n>TransactItems</span><span class=o>=</span><span class=n>items</span><span class=p>,</span>
    <span class=n>ClientRequestToken</span><span class=o>=</span><span class=s2>&quot;unique_idempotency_id&quot;</span>
  <span class=p>)</span>

<span class=k>except</span> <span class=n>ClientError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</code></pre></div> <h3 id=cdk>CDK<a class=headerlink href=#cdk title="Permanent link">&para;</a></h3> <p>Create a dynamodb instance with CDK:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>CdkStack</span><span class=p>(</span><span class=n>Stack</span><span class=p>):</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scope</span><span class=p>:</span> <span class=n>Construct</span><span class=p>,</span> <span class=n>construct_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>scope</span><span class=p>,</span> <span class=n>construct_id</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># create dynamo table</span>
        <span class=n>order_table</span> <span class=o>=</span> <span class=n>aws_dynamodb</span><span class=o>.</span><span class=n>Table</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;orders&quot;</span><span class=p>,</span>
            <span class=n>partition_key</span><span class=o>=</span><span class=n>aws_dynamodb</span><span class=o>.</span><span class=n>Attribute</span><span class=p>(</span>
                <span class=n>name</span><span class=o>=</span><span class=s2>&quot;orderID&quot;</span><span class=p>,</span>
                <span class=nb>type</span><span class=o>=</span><span class=n>aws_dynamodb</span><span class=o>.</span><span class=n>AttributeType</span><span class=o>.</span><span class=n>STRING</span><span class=p>,</span>
            <span class=p>),</span>
            <span class=n>table_class</span><span class=o>=</span> <span class=n>aws_dynamodb</span><span class=o>.</span><span class=n>TableClass</span><span class=o>.</span><span class=n>STANDARD_INFREQUENT_ACCESS</span><span class=p>,</span>
            <span class=n>billing_mode</span><span class=o>=</span><span class=n>aws_dynamodb</span><span class=o>.</span><span class=n>BillingMode</span><span class=o>.</span><span class=n>PAY_PER_REQUEST</span><span class=p>,</span>
            <span class=c1># make it global</span>
            <span class=c1>#replicationRegions= [&#39;us-west-1&#39;, &#39;us-east-1&#39;, &#39;us-west-2&#39;],</span>
        <span class=p>)</span>
</code></pre></div> <p>See also <a href=https://docs.aws.amazon.com/cdk/api/v2/python/aws_cdk.aws_dynamodb/README.html>the examples for CDK</a>.</p> <h3 id=partisql><a href=https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ql-reference.html>PartiSQL</a><a class=headerlink href=#partisql title="Permanent link">&para;</a></h3> <p>A SQL-compatible query language, to select, insert, update, and delete data in Amazon DynamoDB.</p> <h3 id=other-coding-pattern>Other coding pattern<a class=headerlink href=#other-coding-pattern title="Permanent link">&para;</a></h3> <ul> <li><a href=https://quarkus.pro/guides/dynamodb.html>Using quarkus, docker image for dynamodb, </a>: Add dynamodb extension, and do data transformation between item and the business entity managed by the REST resource.</li> <li>For client application, there is this <a href=https://docs.quarkiverse.io/quarkus-amazon-services/dev/amazon-dynamodb.html>nice tutorial from Quarkus</a>.</li> </ul> <h2 id=dynamodb-accelerator-dax>DynamoDB Accelerator - DAX<a class=headerlink href=#dynamodb-accelerator-dax title="Permanent link">&para;</a></h2> <p>To address read congestion of the read operations, DAX is a managed service of a distributed cache cluster in front of DynamoDB. It brings microsecond latency. The APIs are the same as DynamoDB's APIs. </p> <p>It caches the most frequently used data, thus offloading the heavy reads on hot keys off the DynamoDB table, hence preventing the "ProvisionedThroughputExceededException" exception.</p> <h2 id=dynamodb-stream-processing>DynamoDB Stream processing<a class=headerlink href=#dynamodb-stream-processing title="Permanent link">&para;</a></h2> <p>It is possible to get ordered stream of item-level modification such as Create, Update, Delete in a DynamoDB table. It is relevant for:</p> <ul> <li>Reacting on changes in real-time.</li> <li>Real-time usage analytics</li> <li>Inserts into derivative tables</li> <li>Cross-region replication</li> <li>Lambda invocation on item updates </li> </ul> <p><img alt src=../diagrams/dynamodb-stream.drawio.png></p> <h2 id=dynamodb-global-table>DynamoDB global table<a class=headerlink href=#dynamodb-global-table title="Permanent link">&para;</a></h2> <p>The goal is to make a table accessible with low latency from different regions. It uses two-way replication, active-active so application can read and write to the table in any region. We need to enable streaming to get the replication running.</p> <h2 id=dynamodb-time-to-live>DynamoDB Time to live<a class=headerlink href=#dynamodb-time-to-live title="Permanent link">&para;</a></h2> <p>This feature helps to remove records after a specified timestamp. It is used to clean old records, like older than 2 years, or for session data, to be removed after 2 hours.</p> <h2 id=backup>Backup<a class=headerlink href=#backup title="Permanent link">&para;</a></h2> <p>DynamoDB supports continuous backup using point-in-time recovery (PITR). It can go up to the last 35 days. Recovery creates new table.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../rds/ class="md-footer__link md-footer__link--prev" aria-label="Previous: RDS-Aurora"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> RDS-Aurora </div> </div> </a> <a href=../data-lake/ class="md-footer__link md-footer__link--next" aria-label="Next: Data Lake"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Data Lake </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.instant", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> </body> </html>